"use strict";var util=require("util");var format=require("util").format;var _=require("underscore");var Action=require("../action");var $$=require("../const");var argumentErrorHelper=require("../argument/error");var ChoicesPseudoAction=function(c,b){var a={optionStrings:[],dest:c,help:b};Action.call(this,a)};util.inherits(ChoicesPseudoAction,Action);var ActionSubparsers=module.exports=function ActionSubparsers(a){a=a||{};a.dest=a.dest||$$.SUPPRESS;a.nargs=$$.PARSER;this.debug=(a.debug===true);this._progPrefix=a.prog;this._parserClass=a.parserClass;this._nameParserMap={};this._choicesActions=[];a.choices=this._nameParserMap;Action.call(this,a)};util.inherits(ActionSubparsers,Action);ActionSubparsers.prototype.addParser=function(f,e){var g;var b=this;e=e||{};e.debug=(this.debug===true);if(!e.prog){e.prog=this._progPrefix+" "+f}var a=e.aliases||[];if(!!e.help||_.isString(e.help)){var d=e.help;delete e.help;var c=new ChoicesPseudoAction(f,d);this._choicesActions.push(c)}g=new this._parserClass(e);this._nameParserMap[f]=g;a.forEach(function(h){b._nameParserMap[h]=g});return g};ActionSubparsers.prototype._getSubactions=function(){return this._choicesActions};ActionSubparsers.prototype.call=function(e,d,b){var a=b[0];var c=b.slice(1);if(this.dest!==$$.SUPPRESS){d[this.dest]=a}if(!!this._nameParserMap[a]){e=this._nameParserMap[a]}else{throw argumentErrorHelper(format('Unknown parser "%s" (choices: [%s]).',a,_.keys(this._nameParserMap).join(", ")))}e.parseArgs(c,d)};