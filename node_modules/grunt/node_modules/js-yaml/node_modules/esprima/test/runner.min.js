var runTests;function adjustRegexLiteral(a,b){if(a==="value"&&b instanceof RegExp){b=b.toString()}return b}function NotMatchingError(a,b){Error.call(this,"Expected ");this.expected=a;this.actual=b}NotMatchingError.prototype=new Error();function errorToObject(a){var b=a.toString();if(b.substr(0,6)!=="Error:"){if(typeof a.message==="string"){b="Error: "+a.message}}return{index:a.index,lineNumber:a.lineNumber,column:a.column,message:b}}function testParse(g,b,d){var k,o,m,n,c,h,j,f;c=String;n={comment:(typeof d.comments!=="undefined"),range:true,loc:true,tokens:(typeof d.tokens!=="undefined"),raw:true,tolerant:(typeof d.errors!=="undefined")};if(typeof d.tokens!=="undefined"){if(d.tokens.length>0){n.range=(typeof d.tokens[0].range!=="undefined");n.loc=(typeof d.tokens[0].loc!=="undefined")}}if(typeof d.comments!=="undefined"){if(d.comments.length>0){n.range=(typeof d.comments[0].range!=="undefined");n.loc=(typeof d.comments[0].loc!=="undefined")}}k=JSON.stringify(d,null,4);try{o=g.parse(b,n);o=(n.comment||n.tokens||n.tolerant)?o:o.body[0];if(n.tolerant){for(h=0,j=o.errors.length;h<j;h+=1){o.errors[h]=errorToObject(o.errors[h])}}m=JSON.stringify(o,adjustRegexLiteral,4);g.parse(new c(b),n)}catch(l){throw new NotMatchingError(k,l.toString())}if(k!==m){throw new NotMatchingError(k,m)}function a(e,i){if(e==="value"&&i instanceof RegExp){i=i.toString()}return(e==="loc"||e==="range")?undefined:i}if(n.tolerant){return}n.range=false;n.loc=false;k=JSON.stringify(d,a,4);try{o=g.parse(b,n);o=(n.comment||n.tokens)?o:o.body[0];if(n.tolerant){for(h=0,j=o.errors.length;h<j;h+=1){o.errors[h]=errorToObject(o.errors[h])}}m=JSON.stringify(o,a,4)}catch(l){throw new NotMatchingError(k,l.toString())}if(k!==m){throw new NotMatchingError(k,m)}}function testError(c,a,b){var d,k,f,j,h;k=[{},{comment:true},{raw:true},{raw:true,comment:true}];h=false;try{"test".match(new RegExp("[a-z]","x"))}catch(g){h=true}f=JSON.stringify(b);for(d=0;d<k.length;d+=1){try{c.parse(a,k[d])}catch(g){j=JSON.stringify(errorToObject(g))}if(f!==j){if(b.message.indexOf("Invalid regular expression")>0){if(typeof j==="undefined"&&!h){return}}throw new NotMatchingError(f,j)}}}function testAPI(c,f,a){var d,b,h;d=JSON.stringify(a.result,null,4);try{if(typeof a.property!=="undefined"){b=c[a.property]}else{b=c[a.call].apply(c,a.args)}h=JSON.stringify(b,adjustRegexLiteral,4)}catch(g){throw new NotMatchingError(d,g.toString())}if(d!==h){throw new NotMatchingError(d,h)}}function runTest(b,c,a){if(a.hasOwnProperty("lineNumber")){testError(b,c,a)}else{if(a.hasOwnProperty("result")){testAPI(b,c,a)}else{testParse(b,c,a)}}}if(typeof window!=="undefined"){runTests=function(){var o=0,g=0,d,f,b,i,l,m,k;function h(e,p){if(typeof e.innerText==="string"){e.innerText=p}else{e.textContent=p}}function c(q){var p,r;p=document.getElementById("report");r=document.createElement("h4");h(r,q);p.appendChild(r)}function a(q){var p,r;p=document.getElementById("report");r=document.createElement("pre");r.setAttribute("class","code");h(r,q);p.appendChild(r)}function j(r,q,t){var p,s;p=document.getElementById("report");s=document.createElement("p");h(s,"Code:");p.appendChild(s);s=document.createElement("pre");s.setAttribute("class","code");h(s,r);p.appendChild(s);s=document.createElement("p");h(s,"Expected");p.appendChild(s);s=document.createElement("pre");s.setAttribute("class","expected");h(s,q);p.appendChild(s);s=document.createElement("p");h(s,"Actual");p.appendChild(s);s=document.createElement("pre");s.setAttribute("class","actual");h(s,t);p.appendChild(s)}h(document.getElementById("version"),esprima.version);i=new Date();for(d in testFixture){if(testFixture.hasOwnProperty(d)){c(d);f=testFixture[d];for(b in f){if(f.hasOwnProperty(b)){l=f[b];o+=1;try{runTest(esprima,b,l);a(b,JSON.stringify(l,null,4))}catch(n){g+=1;j(b,n.expected,n.actual)}}}}}i=(new Date())-i;if(g>0){h(document.getElementById("status"),o+" tests. Failures: "+g+". "+i+" ms")}else{h(document.getElementById("status"),o+" tests. No failure. "+i+" ms")}}}else{(function(){var e=require("../esprima"),d=require("vm"),a=require("fs"),g=0,c=[],b=new Date(),f,h;d.runInThisContext(a.readFileSync(__dirname+"/test.js","utf-8"));Object.keys(testFixture).forEach(function(i){Object.keys(testFixture[i]).forEach(function(j){g+=1;f=testFixture[i][j];try{runTest(e,j,f)}catch(k){k.source=j;c.push(k)}})});b=(new Date())-b;h=g+" tests. "+c.length+" failures. "+b+" ms";if(c.length){console.error(h);c.forEach(function(i){console.error(i.source+": Expected\n    "+i.expected.split("\n").join("\n    ")+"\nto match\n    "+i.actual)})}else{console.log(h)}process.exit(c.length===0?0:1)}())};