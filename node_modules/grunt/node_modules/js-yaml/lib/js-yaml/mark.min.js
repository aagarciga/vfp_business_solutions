"use strict";var common=require("./common");function Mark(d,c,a,b,e){this.name=d;this.buffer=c;this.position=a;this.line=b;this.column=e}Mark.prototype.getSnippet=function getSnippet(a,c){var e,g,d,b,f;if(!this.buffer){return null}a=a||4;c=c||75;e="";g=this.position;while(g>0&&-1==="\x00\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(g-1))){g-=1;if(this.position-g>(c/2-1)){e=" ... ";g+=5;break}}d="";b=this.position;while(b<this.buffer.length&&-1==="\x00\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(b))){b+=1;if(b-this.position>(c/2-1)){d=" ... ";b-=5;break}}f=this.buffer.slice(g,b);return common.repeat(" ",a)+e+f+d+"\n"+common.repeat(" ",a+this.position-g+e.length)+"^"};Mark.prototype.toString=function toString(c){var b,a="";if(this.name){a+='in "'+this.name+'" '}a+="at line "+(this.line+1)+", column "+(this.column+1);if(!c){b=this.getSnippet();if(b){a+=":\n"+b}}return a};module.exports=Mark;