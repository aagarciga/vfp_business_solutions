(function(){var f,b,a,g,h,c,e,d;exports.OptionParser=g=(function(){function i(k,j){this.banner=j;this.rules=e(k)}i.prototype.parse=function(s){var y,q,j,o,z,l,v,u,r,t,x,n,m,w,k,p;z={"arguments":[]};t=false;l=s;s=d(s);for(q=n=0,w=s.length;n<w;q=++n){y=s[q];if(t){t=false;continue}if(y==="--"){v=l.indexOf("--");z["arguments"]=z["arguments"].concat(l.slice(v+1));break}j=!!(y.match(f)||y.match(h));r=z["arguments"].length>0;if(!r){o=false;p=this.rules;for(m=0,k=p.length;m<k;m++){u=p[m];if(u.shortFlag===y||u.longFlag===y){x=true;if(u.hasArgument){t=true;x=s[q+1]}z[u.name]=u.isList?(z[u.name]||[]).concat(x):x;o=true;break}}if(j&&!o){throw new Error("unrecognized option: "+y)}}if(r||!j){z["arguments"].push(y)}}return z};i.prototype.help=function(){var l,k,p,m,o,j,n;k=[];if(this.banner){k.unshift(""+this.banner+"\n")}n=this.rules;for(o=0,j=n.length;o<j;o++){p=n[o];m=15-p.longFlag.length;m=m>0?Array(m+1).join(" "):"";l=p.shortFlag?p.shortFlag+", ":"    ";k.push("  "+l+p.longFlag+m+p.description)}return"\n"+(k.join("\n"))+"\n"};return i})();f=/^(--\w[\w\-]*)/;h=/^(-\w)$/;b=/^-(\w{2,})/;a=/\[(\w+(\*?))\]/;e=function(m){var i,l,k,j;j=[];for(l=0,k=m.length;l<k;l++){i=m[l];if(i.length<3){i.unshift(null)}j.push(c.apply(null,i))}return j};c=function(m,i,l,k){var j;if(k==null){k={}}j=i.match(a);i=i.match(f)[1];return{name:i.substr(2),shortFlag:m,longFlag:i,description:l,hasArgument:!!(j&&j[1]),isList:!!(j&&j[2])}};d=function(p){var r,j,o,s,m,k,q,i,n;p=p.slice(0);s=[];for(m=0,q=p.length;m<q;m++){r=p[m];if(o=r.match(b)){n=o[1].split("");for(k=0,i=n.length;k<i;k++){j=n[k];s.push("-"+j)}}else{s.push(r)}}return s}}).call(this);