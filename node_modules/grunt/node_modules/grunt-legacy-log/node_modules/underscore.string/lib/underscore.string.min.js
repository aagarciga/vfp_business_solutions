!function(i,k){var c=k.prototype.trim;var b=k.prototype.trimRight;var g=k.prototype.trimLeft;var e=function(p){return p*1||0};var a=function(q,r){if(r<1){return""}var p="";while(r>0){if(r&1){p+=q}r>>=1,q+=q}return p};var l=[].slice;var j=function(p){if(p==null){return"\\s"}else{if(p.source){return p.source}else{return"["+n.escapeRegExp(p)+"]"}}};function o(r,p){var q,t,u=r.toLowerCase();p=[].concat(p);for(q=0;q<p.length;q+=1){t=p[q];if(!t){continue}if(t.test&&t.test(r)){return true}if(t.toLowerCase()===u){return true}}}var f={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"};var d={};for(var m in f){d[f[m]]=m}d["'"]="#39";var h=(function(){function p(s){return Object.prototype.toString.call(s).slice(8,-1).toLowerCase()}var q=a;var r=function(){if(!r.cache.hasOwnProperty(arguments[0])){r.cache[arguments[0]]=r.parse(arguments[0])}return r.format.call(null,r.cache[arguments[0]],arguments)};r.format=function(z,y){var D=1,B=z.length,v="",E,s=[],w,u,x,t,A,C;for(w=0;w<B;w++){v=p(z[w]);if(v==="string"){s.push(z[w])}else{if(v==="array"){x=z[w];if(x[2]){E=y[D];for(u=0;u<x[2].length;u++){if(!E.hasOwnProperty(x[2][u])){throw new Error(h('[_.sprintf] property "%s" does not exist',x[2][u]))}E=E[x[2][u]]}}else{if(x[1]){E=y[x[1]]}else{E=y[D++]}}if(/[^s]/.test(x[8])&&(p(E)!="number")){throw new Error(h("[_.sprintf] expecting number but found %s",p(E)))}switch(x[8]){case"b":E=E.toString(2);break;case"c":E=k.fromCharCode(E);break;case"d":E=parseInt(E,10);break;case"e":E=x[7]?E.toExponential(x[7]):E.toExponential();break;case"f":E=x[7]?parseFloat(E).toFixed(x[7]):parseFloat(E);break;case"o":E=E.toString(8);break;case"s":E=((E=k(E))&&x[7]?E.substring(0,x[7]):E);break;case"u":E=Math.abs(E);break;case"x":E=E.toString(16);break;case"X":E=E.toString(16).toUpperCase();break}E=(/[def]/.test(x[8])&&x[3]&&E>=0?"+"+E:E);A=x[4]?x[4]=="0"?"0":x[4].charAt(1):" ";C=x[6]-k(E).length;t=x[6]?q(A,C):"";s.push(x[5]?E+t:t+E)}}}return s.join("")};r.cache={};r.parse=function(s){var v=s,w=[],y=[],x=0;while(v){if((w=/^[^\x25]+/.exec(v))!==null){y.push(w[0])}else{if((w=/^\x25{2}/.exec(v))!==null){y.push("%")}else{if((w=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(v))!==null){if(w[2]){x|=1;var z=[],u=w[2],t=[];if((t=/^([a-z_][a-z_\d]*)/i.exec(u))!==null){z.push(t[1]);while((u=u.substring(t[0].length))!==""){if((t=/^\.([a-z_][a-z_\d]*)/i.exec(u))!==null){z.push(t[1])}else{if((t=/^\[(\d+)\]/.exec(u))!==null){z.push(t[1])}else{throw new Error("[_.sprintf] huh?")}}}}else{throw new Error("[_.sprintf] huh?")}w[2]=z}else{x|=2}if(x===3){throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported")}y.push(w)}else{throw new Error("[_.sprintf] huh?")}}}v=v.substring(w[0].length)}return y};return r})();var n={VERSION:"2.3.0",isBlank:function(p){if(p==null){p=""}return(/^\s*$/).test(p)},stripTags:function(p){if(p==null){return""}return k(p).replace(/<\/?[^>]+>/g,"")},capitalize:function(p){p=p==null?"":k(p);return p.charAt(0).toUpperCase()+p.slice(1)},chop:function(q,p){if(q==null){return[]}q=k(q);p=~~p;return p>0?q.match(new RegExp(".{1,"+p+"}","g")):[q]},clean:function(p){return n.strip(p).replace(/\s+/g," ")},count:function(s,r){if(s==null||r==null){return 0}s=k(s);r=k(r);var q=0,t=0,p=r.length;while(true){t=s.indexOf(r,t);if(t===-1){break}q++;t+=p}return q},chars:function(p){if(p==null){return[]}return k(p).split("")},swapCase:function(p){if(p==null){return""}return k(p).replace(/\S/g,function(q){return q===q.toUpperCase()?q.toLowerCase():q.toUpperCase()})},escapeHTML:function(p){if(p==null){return""}return k(p).replace(/[&<>"']/g,function(q){return"&"+d[q]+";"})},unescapeHTML:function(p){if(p==null){return""}return k(p).replace(/\&([^;]+);/g,function(q,s){var r;if(s in f){return f[s]}else{if(r=s.match(/^#x([\da-fA-F]+)$/)){return k.fromCharCode(parseInt(r[1],16))}else{if(r=s.match(/^#(\d+)$/)){return k.fromCharCode(~~r[1])}else{return q}}}})},escapeRegExp:function(p){if(p==null){return""}return k(p).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(t,q,s,r){var p=n.chars(t);p.splice(~~q,~~s,r);return p.join("")},insert:function(r,p,q){return n.splice(r,p,0,q)},include:function(q,p){if(p===""){return true}if(q==null){return false}return k(q).indexOf(p)!==-1},join:function(){var p=l.call(arguments),q=p.shift();if(q==null){q=""}return p.join(q)},lines:function(p){if(p==null){return[]}return k(p).split("\n")},reverse:function(p){return n.chars(p).reverse().join("")},startsWith:function(q,p){if(p===""){return true}if(q==null||p==null){return false}q=k(q);p=k(p);return q.length>=p.length&&q.slice(0,p.length)===p},endsWith:function(q,p){if(p===""){return true}if(q==null||p==null){return false}q=k(q);p=k(p);return q.length>=p.length&&q.slice(q.length-p.length)===p},succ:function(p){if(p==null){return""}p=k(p);return p.slice(0,-1)+k.fromCharCode(p.charCodeAt(p.length-1)+1)},titleize:function(p){if(p==null){return""}p=k(p).toLowerCase();return p.replace(/(?:^|\s|-)\S/g,function(q){return q.toUpperCase()})},camelize:function(p){return n.trim(p).replace(/[-_\s]+(.)?/g,function(q,r){return r?r.toUpperCase():""})},underscored:function(p){return n.trim(p).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(p){return n.trim(p).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(p){return n.titleize(k(p).replace(/[\W_]/g," ")).replace(/\s/g,"")},humanize:function(p){return n.capitalize(n.underscored(p).replace(/_id$/,"").replace(/_/g," "))},trim:function(q,p){if(q==null){return""}if(!p&&c){return c.call(q)}p=j(p);return k(q).replace(new RegExp("^"+p+"+|"+p+"+$","g"),"")},ltrim:function(q,p){if(q==null){return""}if(!p&&g){return g.call(q)}p=j(p);return k(q).replace(new RegExp("^"+p+"+"),"")},rtrim:function(q,p){if(q==null){return""}if(!p&&b){return b.call(q)}p=j(p);return k(q).replace(new RegExp(p+"+$"),"")},truncate:function(r,q,p){if(r==null){return""}r=k(r);p=p||"...";q=~~q;return r.length>q?r.slice(0,q)+p:r},prune:function(s,r,t){if(s==null){return""}s=k(s);r=~~r;t=t!=null?k(t):"...";if(s.length<=r){return s}var p=function(u){return u.toUpperCase()!==u.toLowerCase()?"A":" "},q=s.slice(0,r+1).replace(/.(?=\W*\w*$)/g,p);if(q.slice(q.length-2).match(/\w\w/)){q=q.replace(/\s*\S+$/,"")}else{q=n.rtrim(q.slice(0,q.length-1))}return(q+t).length>s.length?s:s.slice(0,q.length)+t},words:function(q,p){if(n.isBlank(q)){return[]}return n.trim(q,p).split(p||/\s+/)},pad:function(t,r,p,q){t=t==null?"":k(t);r=~~r;var s=0;if(!p){p=" "}else{if(p.length>1){p=p.charAt(0)}}switch(q){case"right":s=r-t.length;return t+a(p,s);case"both":s=r-t.length;return a(p,Math.ceil(s/2))+t+a(p,Math.floor(s/2));default:s=r-t.length;return a(p,s)+t}},lpad:function(r,q,p){return n.pad(r,q,p)},rpad:function(r,q,p){return n.pad(r,q,p,"right")},lrpad:function(r,q,p){return n.pad(r,q,p,"both")},sprintf:h,vsprintf:function(q,p){p.unshift(q);return h.apply(null,p)},toNumber:function(q,p){if(!q){return 0}q=n.trim(q);if(!q.match(/^-?\d+(?:\.\d+)?$/)){return NaN}return e(e(q).toFixed(~~p))},numberFormat:function(s,v,p,t){if(isNaN(s)||s==null){return""}s=s.toFixed(~~v);t=typeof t=="string"?t:",";var u=s.split("."),r=u[0],q=u[1]?(p||".")+u[1]:"";return r.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+t)+q},strRight:function(q,p){if(q==null){return""}q=k(q);p=p!=null?k(p):p;var r=!p?-1:q.indexOf(p);return ~r?q.slice(r+p.length,q.length):q},strRightBack:function(q,p){if(q==null){return""}q=k(q);p=p!=null?k(p):p;var r=!p?-1:q.lastIndexOf(p);return ~r?q.slice(r+p.length,q.length):q},strLeft:function(q,p){if(q==null){return""}q=k(q);p=p!=null?k(p):p;var r=!p?-1:q.indexOf(p);return ~r?q.slice(0,r):q},strLeftBack:function(q,p){if(q==null){return""}q+="";p=p!=null?""+p:p;var r=q.lastIndexOf(p);return ~r?q.slice(0,r):q},toSentence:function(u,t,r,q){t=t||", ";r=r||" and ";var p=u.slice(),s=p.pop();if(u.length>2&&q){r=n.rtrim(t)+r}return p.length?p.join(t)+r+s:s},toSentenceSerial:function(){var p=l.call(arguments);p[3]=true;return n.toSentence.apply(n,p)},slugify:function(q){if(q==null){return""}var s="ąàáäâãåæăćęèéëêìíïîłńòóöôõøśșțùúüûñçżź",r="aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz",p=new RegExp(j(s),"g");q=k(q).toLowerCase().replace(p,function(u){var t=s.indexOf(u);return r.charAt(t)||"-"});return n.dasherize(q.replace(/[^\w\s-]/g,""))},surround:function(p,q){return[q,p,q].join("")},quote:function(q,p){return n.surround(q,p||'"')},unquote:function(q,p){p=p||'"';if(q[0]===p&&q[q.length-1]===p){return q.slice(1,q.length-1)}else{return q}},exports:function(){var p={};for(var q in this){if(!this.hasOwnProperty(q)||q.match(/^(?:include|contains|reverse)$/)){continue}p[q]=this[q]}return p},repeat:function(r,s,q){if(r==null){return""}s=~~s;if(q==null){return a(k(r),s)}for(var p=[];s>0;p[--s]=r){}return p.join(q)},naturalCmp:function(t,s){if(t==s){return 0}if(!t){return -1}if(!s){return 1}var r=/(\.\d+)|(\d+)|(\D+)/g,q=k(t).toLowerCase().match(r),p=k(s).toLowerCase().match(r),v=Math.min(q.length,p.length);for(var u=0;u<v;u++){var z=q[u],y=p[u];if(z!==y){var x=parseInt(z,10);if(!isNaN(x)){var w=parseInt(y,10);if(!isNaN(w)&&x-w){return x-w}}return z<y?-1:1}}if(q.length===p.length){return q.length-p.length}return t<s?-1:1},levenshtein:function(u,s){if(u==null&&s==null){return 0}if(u==null){return k(s).length}if(s==null){return k(u).length}u=k(u);s=k(s);var v=[],r,t;for(var q=0;q<=s.length;q++){for(var p=0;p<=u.length;p++){if(q&&p){if(u.charAt(p-1)===s.charAt(q-1)){t=r}else{t=Math.min(v[p],v[p-1],r)+1}}else{t=q+p}r=v[p];v[p]=t}}return v.pop()},toBoolean:function(r,q,p){if(typeof r==="number"){r=""+r}if(typeof r!=="string"){return !!r}r=n.trim(r);if(o(r,q||["true","1"])){return true}if(o(r,p||["false","0"])){return false}}};n.strip=n.trim;n.lstrip=n.ltrim;n.rstrip=n.rtrim;n.center=n.lrpad;n.rjust=n.lpad;n.ljust=n.rpad;n.contains=n.include;n.q=n.quote;n.toBool=n.toBoolean;if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){module.exports=n}exports._s=n}if(typeof define==="function"&&define.amd){define("underscore.string",[],function(){return n})}i._=i._||{};i._.string=i._.str=n}(this,String);