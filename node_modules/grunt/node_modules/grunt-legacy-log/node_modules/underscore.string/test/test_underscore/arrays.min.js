$(document).ready(function(){module("Arrays");test("first",function(){equal(_.first([1,2,3]),1,"can pull out the first element of an array");equal(_([1,2,3]).first(),1,'can perform OO-style "first()"');equal(_.first([1,2,3],0).join(", "),"","can pass an index to first");equal(_.first([1,2,3],2).join(", "),"1, 2","can pass an index to first");equal(_.first([1,2,3],5).join(", "),"1, 2, 3","can pass an index to first");var a=(function(){return _.first(arguments)})(4,3,2,1);equal(a,4,"works on an arguments object.");a=_.map([[1,2,3],[1,2,3]],_.first);equal(a.join(","),"1,1","works well with _.map");a=(function(){return _.take([1,2,3],2)})();equal(a.join(","),"1,2","aliased as take");equal(_.first(null),undefined,"handles nulls")});test("rest",function(){var b=[1,2,3,4];equal(_.rest(b).join(", "),"2, 3, 4","working rest()");equal(_.rest(b,0).join(", "),"1, 2, 3, 4","working rest(0)");equal(_.rest(b,2).join(", "),"3, 4","rest can take an index");var a=(function(){return _(arguments).tail()})(1,2,3,4);equal(a.join(", "),"2, 3, 4","aliased as tail and works on arguments object");a=_.map([[1,2,3],[1,2,3]],_.rest);equal(_.flatten(a).join(","),"2,3,2,3","works well with _.map");a=(function(){return _(arguments).drop()})(1,2,3,4);equal(a.join(", "),"2, 3, 4","aliased as drop and works on arguments object")});test("initial",function(){equal(_.initial([1,2,3,4,5]).join(", "),"1, 2, 3, 4","working initial()");equal(_.initial([1,2,3,4],2).join(", "),"1, 2","initial can take an index");var a=(function(){return _(arguments).initial()})(1,2,3,4);equal(a.join(", "),"1, 2, 3","initial works on arguments object");a=_.map([[1,2,3],[1,2,3]],_.initial);equal(_.flatten(a).join(","),"1,2,1,2","initial works with _.map")});test("last",function(){equal(_.last([1,2,3]),3,"can pull out the last element of an array");equal(_.last([1,2,3],0).join(", "),"","can pass an index to last");equal(_.last([1,2,3],2).join(", "),"2, 3","can pass an index to last");equal(_.last([1,2,3],5).join(", "),"1, 2, 3","can pass an index to last");var a=(function(){return _(arguments).last()})(1,2,3,4);equal(a,4,"works on an arguments object");a=_.map([[1,2,3],[1,2,3]],_.last);equal(a.join(","),"3,3","works well with _.map");equal(_.last(null),undefined,"handles nulls")});test("compact",function(){equal(_.compact([0,1,false,2,false,3]).length,3,"can trim out all falsy values");var a=(function(){return _(arguments).compact().length})(0,1,false,2,false,3);equal(a,3,"works on an arguments object")});test("flatten",function(){if(window.JSON){var b=[1,[2],[3,[[[4]]]]];equal(JSON.stringify(_.flatten(b)),"[1,2,3,4]","can flatten nested arrays");equal(JSON.stringify(_.flatten(b,true)),"[1,2,3,[[[4]]]]","can shallowly flatten nested arrays");var a=(function(){return _.flatten(arguments)})(1,[2],[3,[[[4]]]]);equal(JSON.stringify(a),"[1,2,3,4]","works on an arguments object")}});test("without",function(){var b=[1,2,1,0,3,1,4];equal(_.without(b,0,1).join(", "),"2, 3, 4","can remove all instances of an object");var a=(function(){return _.without(arguments,0,1)})(1,2,1,0,3,1,4);equal(a.join(", "),"2, 3, 4","works on an arguments object");var b=[{one:1},{two:2}];ok(_.without(b,{one:1}).length==2,"uses real object identity for comparisons.");ok(_.without(b,b[0]).length==1,"ditto.")});test("uniq",function(){var c=[1,2,1,3,1,4];equal(_.uniq(c).join(", "),"1, 2, 3, 4","can find the unique values of an unsorted array");var c=[1,1,1,2,2,3];equal(_.uniq(c,true).join(", "),"1, 2, 3","can find the unique values of a sorted array faster");var c=[{name:"moe"},{name:"curly"},{name:"larry"},{name:"curly"}];var b=function(d){return d.name};equal(_.map(_.uniq(c,false,b),b).join(", "),"moe, curly, larry","can find the unique values of an array using a custom iterator");var b=function(d){return d+1};var c=[1,2,2,3,4,4];equal(_.uniq(c,true,b).join(", "),"1, 2, 3, 4","iterator works with sorted array");var a=(function(){return _.uniq(arguments)})(1,2,1,3,1,4);equal(a.join(", "),"1, 2, 3, 4","works on an arguments object")});test("intersection",function(){var c=["moe","curly","larry"],b=["moe","groucho"];equal(_.intersection(c,b).join(""),"moe","can take the set intersection of two arrays");equal(_(c).intersection(b).join(""),"moe","can perform an OO-style intersection");var a=(function(){return _.intersection(arguments,b)})("moe","curly","larry");equal(a.join(""),"moe","works on an arguments object")});test("union",function(){var a=_.union([1,2,3],[2,30,1],[1,40]);equal(a.join(" "),"1 2 3 30 40","takes the union of a list of arrays");var a=_.union([1,2,3],[2,30,1],[1,40,[1]]);equal(a.join(" "),"1 2 3 30 40 1","takes the union of a list of nested arrays")});test("difference",function(){var a=_.difference([1,2,3],[2,30,40]);equal(a.join(" "),"1 3","takes the difference of two arrays");var a=_.difference([1,2,3,4],[2,30,40],[1,11,111]);equal(a.join(" "),"3 4","takes the difference of three arrays")});test("zip",function(){var a=["moe","larry","curly"],d=[30,40,50],c=[true];var b=_.zip(a,d,c);equal(String(b),"moe,30,true,larry,40,,curly,50,","zipped together arrays of different lengths")});test("object",function(){var a=_.object(["moe","larry","curly"],[30,40,50]);var b={moe:30,larry:40,curly:50};ok(_.isEqual(a,b),"two arrays zipped together into an object");a=_.object([["one",1],["two",2],["three",3]]);b={one:1,two:2,three:3};ok(_.isEqual(a,b),"an array of pairs zipped together into an object");var c={moe:30,larry:40,curly:50};ok(_.isEqual(_.object(_.pairs(c)),c),"an object converted to pairs and back to an object");ok(_.isEqual(_.object(null),{}),"handles nulls")});test("indexOf",function(){var b=[1,2,3];b.indexOf=null;equal(_.indexOf(b,2),1,"can compute indexOf, even without the native function");var a=(function(){return _.indexOf(arguments,2)})(1,2,3);equal(a,1,"works on an arguments object");equal(_.indexOf(null,2),-1,"handles nulls properly");var b=[10,20,30,40,50],d=35;var c=_.indexOf(b,d,true);equal(c,-1,"35 is not in the list");b=[10,20,30,40,50];d=40;c=_.indexOf(b,d,true);equal(c,3,"40 is in the list");b=[1,40,40,40,40,40,40,40,50,60,70];d=40;c=_.indexOf(b,d,true);equal(c,1,"40 is in the list");b=[1,2,3,1,2,3,1,2,3];c=_.indexOf(b,2,5);equal(c,7,"supports the fromIndex argument")});test("lastIndexOf",function(){var b=[1,0,1];equal(_.lastIndexOf(b,1),2);b=[1,0,1,0,0,1,0,0,0];b.lastIndexOf=null;equal(_.lastIndexOf(b,1),5,"can compute lastIndexOf, even without the native function");equal(_.lastIndexOf(b,0),8,"lastIndexOf the other element");var a=(function(){return _.lastIndexOf(arguments,1)})(1,0,1,0,0,1,0,0,0);equal(a,5,"works on an arguments object");equal(_.indexOf(null,2),-1,"handles nulls properly");b=[1,2,3,1,2,3,1,2,3];index=_.lastIndexOf(b,2,2);equal(index,1,"supports the fromIndex argument")});test("range",function(){equal(_.range(0).join(""),"","range with 0 as a first argument generates an empty array");equal(_.range(4).join(" "),"0 1 2 3","range with a single positive argument generates an array of elements 0,1,2,...,n-1");equal(_.range(5,8).join(" "),"5 6 7","range with two arguments a &amp; b, a&lt;b generates an array of elements a,a+1,a+2,...,b-2,b-1");equal(_.range(8,5).join(""),"","range with two arguments a &amp; b, b&lt;a generates an empty array");equal(_.range(3,10,3).join(" "),"3 6 9","range with three arguments a &amp; b &amp; c, c &lt; b-a, a &lt; b generates an array of elements a,a+c,a+2c,...,b - (multiplier of a) &lt; c");equal(_.range(3,10,15).join(""),"3","range with three arguments a &amp; b &amp; c, c &gt; b-a, a &lt; b generates an array with a single element, equal to a");equal(_.range(12,7,-2).join(" "),"12 10 8","range with three arguments a &amp; b &amp; c, a &gt; b, c &lt; 0 generates an array of elements a,a-c,a-2c and ends with the number not less than b");equal(_.range(0,-10,-1).join(" "),"0 -1 -2 -3 -4 -5 -6 -7 -8 -9","final example in the Python docs")})});