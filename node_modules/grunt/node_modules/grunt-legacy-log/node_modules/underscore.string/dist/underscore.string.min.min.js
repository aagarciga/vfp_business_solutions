!function(y,k){function b(g,h){var f,c,a=g.toLowerCase();for(h=[].concat(h),f=0;h.length>f;f+=1){if(c=h[f]){if(c.test&&c.test(g)){return !0}if(c.toLowerCase()===a){return !0}}}}var C=k.prototype.trim,B=k.prototype.trimRight,q=k.prototype.trimLeft,m=function(a){return 1*a||0},j=function(c,f){if(1>f){return""}for(var a="";f>0;){1&f&&(a+=c),f>>=1,c+=c}return a},A=[].slice,z=function(a){return null==a?"\\s":a.source?a.source:"["+w.escapeRegExp(a)+"]"},D={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"},x={};for(var d in D){x[D[d]]=d}x["'"]="#39";var v=function(){function f(g){return Object.prototype.toString.call(g).slice(8,-1).toLowerCase()}var c=j,a=function(){return a.cache.hasOwnProperty(arguments[0])||(a.cache[arguments[0]]=a.parse(arguments[0])),a.format.call(null,a.cache[arguments[0]],arguments)};return a.format=function(L,K){var E,r,h,J,I,M,G,e=1,F=L.length,H="",n=[];for(r=0;F>r;r++){if(H=f(L[r]),"string"===H){n.push(L[r])}else{if("array"===H){if(J=L[r],J[2]){for(E=K[e],h=0;J[2].length>h;h++){if(!E.hasOwnProperty(J[2][h])){throw new Error(v('[_.sprintf] property "%s" does not exist',J[2][h]))}E=E[J[2][h]]}}else{E=J[1]?K[J[1]]:K[e++]}if(/[^s]/.test(J[8])&&"number"!=f(E)){throw new Error(v("[_.sprintf] expecting number but found %s",f(E)))}switch(J[8]){case"b":E=E.toString(2);break;case"c":E=k.fromCharCode(E);break;case"d":E=parseInt(E,10);break;case"e":E=J[7]?E.toExponential(J[7]):E.toExponential();break;case"f":E=J[7]?parseFloat(E).toFixed(J[7]):parseFloat(E);break;case"o":E=E.toString(8);break;case"s":E=(E=k(E))&&J[7]?E.substring(0,J[7]):E;break;case"u":E=Math.abs(E);break;case"x":E=E.toString(16);break;case"X":E=E.toString(16).toUpperCase()}E=/[def]/.test(J[8])&&J[3]&&E>=0?"+"+E:E,M=J[4]?"0"==J[4]?"0":J[4].charAt(1):" ",G=J[6]-k(E).length,I=J[6]?c(M,G):"",n.push(J[5]?E+I:I+E)}}}return n.join("")},a.cache={},a.parse=function(F){for(var H=F,E=[],s=[],h=0;H;){if(null!==(E=/^[^\x25]+/.exec(H))){s.push(E[0])}else{if(null!==(E=/^\x25{2}/.exec(H))){s.push("%")}else{if(null===(E=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(H))){throw new Error("[_.sprintf] huh?")}if(E[2]){h|=1;var p=[],g=E[2],G=[];if(null===(G=/^([a-z_][a-z_\d]*)/i.exec(g))){throw new Error("[_.sprintf] huh?")}for(p.push(G[1]);""!==(g=g.substring(G[0].length));){if(null!==(G=/^\.([a-z_][a-z_\d]*)/i.exec(g))){p.push(G[1])}else{if(null===(G=/^\[(\d+)\]/.exec(g))){throw new Error("[_.sprintf] huh?")}p.push(G[1])}}E[2]=p}else{h|=2}if(3===h){throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported")}s.push(E)}}H=H.substring(E[0].length)}return s},a}(),w={VERSION:"2.3.0",isBlank:function(a){return null==a&&(a=""),/^\s*$/.test(a)},stripTags:function(a){return null==a?"":k(a).replace(/<\/?[^>]+>/g,"")},capitalize:function(a){return a=null==a?"":k(a),a.charAt(0).toUpperCase()+a.slice(1)},chop:function(c,a){return null==c?[]:(c=k(c),a=~~a,a>0?c.match(new RegExp(".{1,"+a+"}","g")):[c])},clean:function(a){return w.strip(a).replace(/\s+/g," ")},count:function(h,g){if(null==h||null==g){return 0}h=k(h),g=k(g);for(var f=0,a=0,c=g.length;;){if(a=h.indexOf(g,a),-1===a){break}f++,a+=c}return f},chars:function(a){return null==a?[]:k(a).split("")},swapCase:function(a){return null==a?"":k(a).replace(/\S/g,function(c){return c===c.toUpperCase()?c.toLowerCase():c.toUpperCase()})},escapeHTML:function(a){return null==a?"":k(a).replace(/[&<>"']/g,function(c){return"&"+x[c]+";"})},unescapeHTML:function(a){return null==a?"":k(a).replace(/\&([^;]+);/g,function(g,f){var c;return f in D?D[f]:(c=f.match(/^#x([\da-fA-F]+)$/))?k.fromCharCode(parseInt(c[1],16)):(c=f.match(/^#(\d+)$/))?k.fromCharCode(~~c[1]):g})},escapeRegExp:function(a){return null==a?"":k(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(g,h,f,c){var a=w.chars(g);return a.splice(~~h,~~f,c),a.join("")},insert:function(c,f,a){return w.splice(c,f,0,a)},include:function(c,a){return""===a?!0:null==c?!1:-1!==k(c).indexOf(a)},join:function(){var a=A.call(arguments),c=a.shift();return null==c&&(c=""),a.join(c)},lines:function(a){return null==a?[]:k(a).split("\n")},reverse:function(a){return w.chars(a).reverse().join("")},startsWith:function(c,a){return""===a?!0:null==c||null==a?!1:(c=k(c),a=k(a),c.length>=a.length&&c.slice(0,a.length)===a)},endsWith:function(c,a){return""===a?!0:null==c||null==a?!1:(c=k(c),a=k(a),c.length>=a.length&&c.slice(c.length-a.length)===a)},succ:function(a){return null==a?"":(a=k(a),a.slice(0,-1)+k.fromCharCode(a.charCodeAt(a.length-1)+1))},titleize:function(a){return null==a?"":(a=k(a).toLowerCase(),a.replace(/(?:^|\s|-)\S/g,function(c){return c.toUpperCase()}))},camelize:function(a){return w.trim(a).replace(/[-_\s]+(.)?/g,function(c,f){return f?f.toUpperCase():""})},underscored:function(a){return w.trim(a).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(a){return w.trim(a).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(a){return w.titleize(k(a).replace(/[\W_]/g," ")).replace(/\s/g,"")},humanize:function(a){return w.capitalize(w.underscored(a).replace(/_id$/,"").replace(/_/g," "))},trim:function(c,a){return null==c?"":!a&&C?C.call(c):(a=z(a),k(c).replace(new RegExp("^"+a+"+|"+a+"+$","g"),""))},ltrim:function(c,a){return null==c?"":!a&&q?q.call(c):(a=z(a),k(c).replace(new RegExp("^"+a+"+"),""))},rtrim:function(c,a){return null==c?"":!a&&B?B.call(c):(a=z(a),k(c).replace(new RegExp(a+"+$"),""))},truncate:function(f,c,a){return null==f?"":(f=k(f),a=a||"...",c=~~c,f.length>c?f.slice(0,c)+a:f)},prune:function(h,g,f){if(null==h){return""}if(h=k(h),g=~~g,f=null!=f?k(f):"...",g>=h.length){return h}var a=function(i){return i.toUpperCase()!==i.toLowerCase()?"A":" "},c=h.slice(0,g+1).replace(/.(?=\W*\w*$)/g,a);return c=c.slice(c.length-2).match(/\w\w/)?c.replace(/\s*\S+$/,""):w.rtrim(c.slice(0,c.length-1)),(c+f).length>h.length?h:h.slice(0,c.length)+f},words:function(a,c){return w.isBlank(a)?[]:w.trim(a,c).split(c||/\s+/)},pad:function(h,g,f,a){h=null==h?"":k(h),g=~~g;var c=0;switch(f?f.length>1&&(f=f.charAt(0)):f=" ",a){case"right":return c=g-h.length,h+j(f,c);case"both":return c=g-h.length,j(f,Math.ceil(c/2))+h+j(f,Math.floor(c/2));default:return c=g-h.length,j(f,c)+h}},lpad:function(c,f,a){return w.pad(c,f,a)},rpad:function(c,f,a){return w.pad(c,f,a,"right")},lrpad:function(c,f,a){return w.pad(c,f,a,"both")},sprintf:v,vsprintf:function(a,c){return c.unshift(a),v.apply(null,c)},toNumber:function(a,c){return a?(a=w.trim(a),a.match(/^-?\d+(?:\.\d+)?$/)?m(m(a).toFixed(~~c)):0/0):0},numberFormat:function(o,p,h,g){if(isNaN(o)||null==o){return""}o=o.toFixed(~~p),g="string"==typeof g?g:",";var c=o.split("."),f=c[0],a=c[1]?(h||".")+c[1]:"";return f.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+g)+a},strRight:function(f,c){if(null==f){return""}f=k(f),c=null!=c?k(c):c;var a=c?f.indexOf(c):-1;return ~a?f.slice(a+c.length,f.length):f},strRightBack:function(f,c){if(null==f){return""}f=k(f),c=null!=c?k(c):c;var a=c?f.lastIndexOf(c):-1;return ~a?f.slice(a+c.length,f.length):f},strLeft:function(f,c){if(null==f){return""}f=k(f),c=null!=c?k(c):c;var a=c?f.indexOf(c):-1;return ~a?f.slice(0,a):f},strLeftBack:function(c,f){if(null==c){return""}c+="",f=null!=f?""+f:f;var a=c.lastIndexOf(f);return ~a?c.slice(0,a):c},toSentence:function(h,l,g,f){l=l||", ",g=g||" and ";var a=h.slice(),c=a.pop();return h.length>2&&f&&(g=w.rtrim(l)+g),a.length?a.join(l)+g+c:c},toSentenceSerial:function(){var a=A.call(arguments);return a[3]=!0,w.toSentence.apply(w,a)},slugify:function(g){if(null==g){return""}var f="ąàáäâãåæăćęèéëêìíïîłńòóöôõøśșțùúüûñçżź",c="aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz",a=new RegExp(z(f),"g");return g=k(g).toLowerCase().replace(a,function(h){var i=f.indexOf(h);return c.charAt(i)||"-"}),w.dasherize(g.replace(/[^\w\s-]/g,""))},surround:function(a,c){return[c,a,c].join("")},quote:function(a,c){return w.surround(a,c||'"')},unquote:function(a,c){return c=c||'"',a[0]===c&&a[a.length-1]===c?a.slice(1,a.length-1):a},exports:function(){var a={};for(var c in this){this.hasOwnProperty(c)&&!c.match(/^(?:include|contains|reverse)$/)&&(a[c]=this[c])}return a},repeat:function(g,f,c){if(null==g){return""}if(f=~~f,null==c){return j(k(g),f)}for(var a=[];f>0;a[--f]=g){}return a.join(c)},naturalCmp:function(F,g){if(F==g){return 0}if(!F){return -1}if(!g){return 1}for(var J=/(\.\d+)|(\d+)|(\D+)/g,I=k(F).toLowerCase().match(J),p=k(g).toLowerCase().match(J),n=Math.min(I.length,p.length),h=0;n>h;h++){var H=I[h],G=p[h];if(H!==G){var K=parseInt(H,10);if(!isNaN(K)){var E=parseInt(G,10);if(!isNaN(E)&&K-E){return K-E}}return G>H?-1:1}}return I.length===p.length?I.length-p.length:g>F?-1:1},levenshtein:function(n,h){if(null==n&&null==h){return 0}if(null==n){return k(h).length}if(null==h){return k(n).length}n=k(n),h=k(h);for(var g,c,f=[],a=0;h.length>=a;a++){for(var p=0;n.length>=p;p++){c=a&&p?n.charAt(p-1)===h.charAt(a-1)?g:Math.min(f[p],f[p-1],g)+1:a+p,g=f[p],f[p]=c}}return f.pop()},toBoolean:function(c,f,a){return"number"==typeof c&&(c=""+c),"string"!=typeof c?!!c:(c=w.trim(c),b(c,f||["true","1"])?!0:b(c,a||["false","0"])?!1:void 0)}};w.strip=w.trim,w.lstrip=w.ltrim,w.rstrip=w.rtrim,w.center=w.lrpad,w.rjust=w.lpad,w.ljust=w.rpad,w.contains=w.include,w.q=w.quote,w.toBool=w.toBoolean,"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(module.exports=w),exports._s=w),"function"==typeof define&&define.amd&&define("underscore.string",[],function(){return w}),y._=y._||{},y._.string=y._.str=w}(this,String);