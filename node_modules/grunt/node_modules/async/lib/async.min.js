(function(){var e={};var l=this,n=l.async;if(typeof module!=="undefined"&&module.exports){module.exports=e}else{l.async=e}e.noConflict=function(){l.async=n;return e};var g=function(p,r){if(p.forEach){return p.forEach(r)}for(var q=0;q<p.length;q+=1){r(p[q],q,p)}};var d=function(p,r){if(p.map){return p.map(r)}var q=[];g(p,function(s,u,t){q.push(r(s,u,t))});return q};var a=function(p,r,q){if(p.reduce){return p.reduce(r,q)}g(p,function(s,u,t){q=r(q,s,u,t)});return q};var k=function(r){if(Object.keys){return Object.keys(r)}var q=[];for(var p in r){if(r.hasOwnProperty(p)){q.push(p)}}return q};if(typeof process==="undefined"||!(process.nextTick)){e.nextTick=function(p){setTimeout(p,0)}}else{e.nextTick=process.nextTick}e.forEach=function(p,r,s){s=s||function(){};if(!p.length){return s()}var q=0;g(p,function(t){r(t,function(u){if(u){s(u);s=function(){}}else{q+=1;if(q===p.length){s(null)}}})})};e.forEachSeries=function(p,s,t){t=t||function(){};if(!p.length){return t()}var r=0;var q=function(){s(p[r],function(u){if(u){t(u);t=function(){}}else{r+=1;if(r===p.length){t(null)}else{q()}}})};q()};e.forEachLimit=function(p,r,u,w){w=w||function(){};if(!p.length||r<=0){return w()}var t=0;var q=0;var s=0;(function v(){if(t===p.length){return w()}while(s<r&&q<p.length){q+=1;s+=1;u(p[q-1],function(x){if(x){w(x);w=function(){}}else{t+=1;s-=1;if(t===p.length){w()}else{v()}}})}})()};var h=function(p){return function(){var q=Array.prototype.slice.call(arguments);return p.apply(null,[e.forEach].concat(q))}};var o=function(p){return function(){var q=Array.prototype.slice.call(arguments);return p.apply(null,[e.forEachSeries].concat(q))}};var m=function(s,p,r,t){var q=[];p=d(p,function(u,v){return{index:v,value:u}});s(p,function(u,v){r(u.value,function(x,w){q[u.index]=w;v(x)})},function(u){t(u,q)})};e.map=h(m);e.mapSeries=o(m);e.reduce=function(p,q,r,s){e.forEachSeries(p,function(t,u){r(q,t,function(x,w){q=w;u(x)})},function(t){s(t,q)})};e.inject=e.reduce;e.foldl=e.reduce;e.reduceRight=function(p,q,r,t){var s=d(p,function(u){return u}).reverse();e.reduce(s,q,r,t)};e.foldr=e.reduceRight;var j=function(s,p,r,t){var q=[];p=d(p,function(u,v){return{index:v,value:u}});s(p,function(u,v){r(u.value,function(w){if(w){q.push(u)}v()})},function(u){t(d(q.sort(function(w,v){return w.index-v.index}),function(v){return v.value}))})};e.filter=h(j);e.filterSeries=o(j);e.select=e.filter;e.selectSeries=e.filterSeries;var f=function(s,p,r,t){var q=[];p=d(p,function(u,v){return{index:v,value:u}});s(p,function(u,v){r(u.value,function(w){if(!w){q.push(u)}v()})},function(u){t(d(q.sort(function(w,v){return w.index-v.index}),function(v){return v.value}))})};e.reject=h(f);e.rejectSeries=o(f);var i=function(r,p,q,s){r(p,function(t,u){q(t,function(v){if(v){s(t);s=function(){}}else{u()}})},function(t){s()})};e.detect=h(i);e.detectSeries=o(i);e.some=function(p,q,r){e.forEach(p,function(s,t){q(s,function(u){if(u){r(true);r=function(){}}t()})},function(s){r(false)})};e.any=e.some;e.every=function(p,q,r){e.forEach(p,function(s,t){q(s,function(u){if(!u){r(false);r=function(){}}t()})},function(s){r(true)})};e.all=e.every;e.sortBy=function(p,q,r){e.map(p,function(s,t){q(s,function(u,v){if(u){t(u)}else{t(null,{value:s,criteria:v})}})},function(u,s){if(u){return r(u)}else{var t=function(y,x){var w=y.criteria,v=x.criteria;return w<v?-1:w>v?1:0};r(null,d(s.sort(t),function(v){return v.value}))}})};e.auto=function(w,v){v=v||function(){};var t=k(w);if(!t.length){return v(null)}var q={};var s=[];var p=function(x){s.unshift(x)};var r=function(y){for(var x=0;x<s.length;x+=1){if(s[x]===y){s.splice(x,1);return}}};var u=function(){g(s.slice(0),function(x){x()})};p(function(){if(k(q).length===t.length){v(null,q);v=function(){}}});g(t,function(y){var x=(w[y] instanceof Function)?[w[y]]:w[y];var C=function(E){if(E){v(E);v=function(){}}else{var D=Array.prototype.slice.call(arguments,1);if(D.length<=1){D=D[0]}q[y]=D;u()}};var A=x.slice(0,Math.abs(x.length-1))||[];var z=function(){return a(A,function(E,D){return(E&&q.hasOwnProperty(D))},true)&&!q.hasOwnProperty(y)};if(z()){x[x.length-1](C,q)}else{var B=function(){if(z()){r(B);x[x.length-1](C,q)}};p(B)}})};e.waterfall=function(r,q){q=q||function(){};if(!r.length){return q()}var p=function(s){return function(v){if(v){q(v);q=function(){}}else{var t=Array.prototype.slice.call(arguments,1);var u=s.next();if(u){t.push(p(u))}else{t.push(q)}e.nextTick(function(){s.apply(null,t)})}}};p(e.iterator(r))()};e.parallel=function(r,q){q=q||function(){};if(r.constructor===Array){e.map(r,function(s,t){if(s){s(function(v){var u=Array.prototype.slice.call(arguments,1);if(u.length<=1){u=u[0]}t.call(null,v,u)})}},q)}else{var p={};e.forEach(k(r),function(s,t){r[s](function(v){var u=Array.prototype.slice.call(arguments,1);if(u.length<=1){u=u[0]}p[s]=u;t(v)})},function(s){q(s,p)})}};e.series=function(r,q){q=q||function(){};if(r.constructor===Array){e.mapSeries(r,function(s,t){if(s){s(function(v){var u=Array.prototype.slice.call(arguments,1);if(u.length<=1){u=u[0]}t.call(null,v,u)})}},q)}else{var p={};e.forEachSeries(k(r),function(s,t){r[s](function(v){var u=Array.prototype.slice.call(arguments,1);if(u.length<=1){u=u[0]}p[s]=u;t(v)})},function(s){q(s,p)})}};e.iterator=function(q){var p=function(r){var s=function(){if(q.length){q[r].apply(null,arguments)}return s.next()};s.next=function(){return(r<q.length-1)?p(r+1):null};return s};return p(0)};e.apply=function(q){var p=Array.prototype.slice.call(arguments,1);return function(){return q.apply(null,p.concat(Array.prototype.slice.call(arguments)))}};var c=function(t,p,q,u){var s=[];t(p,function(v,r){q(v,function(w,x){s=s.concat(x||[]);r(w)})},function(r){u(r,s)})};e.concat=h(c);e.concatSeries=o(c);e.whilst=function(r,p,q){if(r()){p(function(s){if(s){return q(s)}e.whilst(r,p,q)})}else{q()}};e.until=function(r,p,q){if(!r()){p(function(s){if(s){return q(s)}e.until(r,p,q)})}else{q()}};e.queue=function(t,r){var p=0;var s={tasks:[],concurrency:r,saturated:null,empty:null,drain:null,push:function(q,u){if(q.constructor!==Array){q=[q]}g(q,function(v){s.tasks.push({data:v,callback:typeof u==="function"?u:null});if(s.saturated&&s.tasks.length==r){s.saturated()}e.nextTick(s.process)})},process:function(){if(p<s.concurrency&&s.tasks.length){var q=s.tasks.shift();if(s.empty&&s.tasks.length==0){s.empty()}p+=1;t(q.data,function(){p-=1;if(q.callback){q.callback.apply(q,arguments)}if(s.drain&&s.tasks.length+p==0){s.drain()}s.process()})}},length:function(){return s.tasks.length},running:function(){return p}};return s};var b=function(p){return function(r){var q=Array.prototype.slice.call(arguments,1);r.apply(null,q.concat([function(t){var s=Array.prototype.slice.call(arguments,1);if(typeof console!=="undefined"){if(t){if(console.error){console.error(t)}}else{if(console[p]){g(s,function(u){console[p](u)})}}}}]))}};e.log=b("log");e.dir=b("dir");e.memoize=function(t,r){var q={};var s={};r=r||function(u){return u};var p=function(){var u=Array.prototype.slice.call(arguments);var w=u.pop();var v=r.apply(null,u);if(v in q){w.apply(null,q[v])}else{if(v in s){s[v].push(w)}else{s[v]=[w];t.apply(null,u.concat([function(){q[v]=arguments;var z=s[v];delete s[v];for(var y=0,x=z.length;y<x;y++){z[y].apply(null,arguments)}}]))}}};p.unmemoized=t;return p};e.unmemoize=function(p){return function(){return(p.unmemoized||p).apply(null,arguments)}}}());