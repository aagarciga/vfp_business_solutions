var RE_SPACEDASH=/[- ]/g;var iconv=module.exports={toEncoding:function(b,a){return iconv.getCodec(a).toEncoding(b)},fromEncoding:function(a,b){return iconv.getCodec(b).fromEncoding(a)},encodingExists:function(a){loadEncodings();a=a.replace(RE_SPACEDASH,"").toLowerCase();return(iconv.encodings[a]!==undefined)},defaultCharUnicode:"ï¿½",defaultCharSingleByte:"?",encodingsLoaded:false,getCodec:function(d){loadEncodings();var a=d||"utf8";var c=undefined;while(1){if(getType(a)==="String"){a=a.replace(RE_SPACEDASH,"").toLowerCase()}var e=iconv.encodings[a];var b=getType(e);if(b==="String"){c={originalEncoding:a};a=e}else{if(b==="Object"&&e.type!=undefined){c=e;a=e.type}else{if(b==="Function"){return e(c)}else{throw new Error("Encoding not recognized: '"+d+"' (searched as: '"+a+"')")}}}}},encodings:{internal:function(a){return{toEncoding:toInternalEncoding,fromEncoding:fromInternalEncoding,options:a}},utf8:"internal",ucs2:"internal",binary:"internal",ascii:"internal",base64:"internal",singlebyte:function(a){if(!a.charsBuf){if(!a.chars||(a.chars.length!==128&&a.chars.length!==256)){throw new Error("Encoding '"+a.type+"' has incorrect 'chars' (must be of len 128 or 256)")}if(a.chars.length===128){a.chars=asciiString+a.chars}a.charsBuf=new Buffer(a.chars,"ucs2")}if(!a.revCharsBuf){a.revCharsBuf=new Buffer(65536);var c=iconv.defaultCharSingleByte.charCodeAt(0);for(var b=0;b<a.revCharsBuf.length;b++){a.revCharsBuf[b]=c}for(var b=0;b<a.chars.length;b++){a.revCharsBuf[a.chars.charCodeAt(b)]=b}}return{toEncoding:toSingleByteEncoding,fromEncoding:fromSingleByteEncoding,options:a,}},table:function(a){if(!a.table){throw new Error("Encoding '"+a.type+"' has incorect 'table' option")}if(!a.revCharsTable){var e=a.revCharsTable={};for(var c=0;c<=65535;c++){e[c]=0}var d=a.table;for(var b in d){e[d[b]]=+b}}return{toEncoding:toTableEncoding,fromEncoding:fromTableEncoding,options:a,}}}};function toInternalEncoding(a){return new Buffer(ensureString(a),this.options.originalEncoding)}function fromInternalEncoding(a){return ensureBuffer(a).toString(this.options.originalEncoding)}function toTableEncoding(g){g=ensureString(g);var a=g.length;var k=this.options.revCharsTable;var b=new Buffer(a*2),f,c,h=k[iconv.defaultCharUnicode.charCodeAt(0)];for(var e=0,d=0;e<a;e++){c=g.charCodeAt(e);if(c>>7){f=k[c]||h;b[d++]=f>>8;b[d++]=f&255}else{b[d++]=c}}return b.slice(0,d)}function fromTableEncoding(c){c=ensureBuffer(c);var g=c.length;var k=this.options.table;var a=new Buffer(g*2),b,f,h=iconv.defaultCharUnicode.charCodeAt(0);for(var e=0,d=0;e<g;e++,d+=2){f=c[e];if(f&128){f=(f<<8)+c[++e];b=k[f]||h}else{b=f}a[d]=b&255;a[d+1]=b>>8}return a.slice(0,d).toString("ucs2")}function toSingleByteEncoding(d){d=ensureString(d);var b=new Buffer(d.length);var a=this.options.revCharsBuf;for(var c=0;c<d.length;c++){b[c]=a[d.charCodeAt(c)]}return b}function fromSingleByteEncoding(d){d=ensureBuffer(d);var f=this.options.charsBuf;var g=new Buffer(d.length*2);var c=0,b=0;for(var e=0,a=d.length;e<a;e++){c=d[e]*2;b=e*2;g[b]=f[c];g[b+1]=f[c+1]}return g.toString("ucs2")}iconv.encode=iconv.toEncoding;iconv.decode=iconv.fromEncoding;function loadEncodings(){if(!iconv.encodingsLoaded){[require("./encodings/singlebyte"),require("./encodings/gbk"),require("./encodings/big5")].forEach(function(b){for(var a in b){iconv.encodings[a]=b[a]}});iconv.encodingsLoaded=true}}var asciiString="\x00\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\x7f";var ensureBuffer=function(a){a=a||new Buffer(0);return(a instanceof Buffer)?a:new Buffer(""+a,"binary")};var ensureString=function(a){a=a||"";return(a instanceof Buffer)?a.toString("utf8"):(""+a)};var getType=function(a){return Object.prototype.toString.call(a).slice(8,-1)};