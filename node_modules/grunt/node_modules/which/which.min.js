module.exports=which;which.sync=whichSync;var path=require("path"),fs,COLON=process.platform==="win32"?";":":",isExe,fs=require("fs");if(process.platform=="win32"){isExe=function isExe(){return true}}else{isExe=function isExe(c,b,d){var a=(c&1)||(c&8)&&process.getgid&&d===process.getgid()||(c&8)&&process.getuid&&0===process.getuid()||(c&64)&&process.getuid&&b===process.getuid()||(c&64)&&process.getuid&&0===process.getuid();return a}}function which(e,a){if(isAbsolute(e)){return a(null,e)}var c=(process.env.PATH||"").split(COLON),b=[""];if(process.platform==="win32"){c.push(process.cwd());b=(process.env.PATHEXT||".EXE").split(COLON);if(e.indexOf(".")!==-1){b.unshift("")}}(function d(g,f){if(g===f){return a(new Error("not found: "+e))}var j=path.resolve(c[g],e);(function h(k,l){if(k===l){return d(g+1,f)}var i=b[k];fs.stat(j+i,function(n,m){if(!n&&m&&m.isFile()&&isExe(m.mode,m.uid,m.gid)){return a(null,j+i)}return h(k+1,l)})})(0,b.length)})(0,c.length)}function whichSync(b){if(isAbsolute(b)){return b}var n=(process.env.PATH||"").split(COLON),g=[""];if(process.platform==="win32"){n.push(process.cwd());g=(process.env.PATHEXT||".EXE").split(COLON);if(b.indexOf(".")!==-1){g.unshift("")}}for(var f=0,c=n.length;f<c;f++){var a=path.join(n[f],b);for(var d=0,k=g.length;d<k;d++){var m=a+g[d];var e;try{e=fs.statSync(m)}catch(h){}if(e&&e.isFile()&&isExe(e.mode,e.uid,e.gid)){return m}}}throw new Error("not found: "+b)}var isAbsolute=process.platform==="win32"?absWin:absUnix;function absWin(e){if(absUnix(e)){return true}var d=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?([\\\/])?/,a=d.exec(e),b=a[1]||"",f=b&&b.charAt(1)!==":",c=!!a[2]||f;return c}function absUnix(a){return a.charAt(0)==="/"||a===""};