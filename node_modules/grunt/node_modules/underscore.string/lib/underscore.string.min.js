(function(i){var c=String.prototype.trim;var b=String.prototype.trimRight;var g=String.prototype.trimLeft;var e=function(n){return n*1||0};var a=function(p,q,o){p+="";q=~~q;for(var n=[];q>0;n[--q]=p){}return n.join(o==null?"":o)};var k=function(n){return Array.prototype.slice.call(n)};var j=function(n){if(n!=null){return"["+m.escapeRegExp(""+n)+"]"}return"\\s"};var f={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"};var d={};for(var l in f){d[f[l]]=l}var h=(function(){function n(q){return Object.prototype.toString.call(q).slice(8,-1).toLowerCase()}var o=a;var p=function(){if(!p.cache.hasOwnProperty(arguments[0])){p.cache[arguments[0]]=p.parse(arguments[0])}return p.format.call(null,p.cache[arguments[0]],arguments)};p.format=function(x,w){var B=1,z=x.length,t="",C,q=[],u,s,v,r,y,A;for(u=0;u<z;u++){t=n(x[u]);if(t==="string"){q.push(x[u])}else{if(t==="array"){v=x[u];if(v[2]){C=w[B];for(s=0;s<v[2].length;s++){if(!C.hasOwnProperty(v[2][s])){throw new Error(h('[_.sprintf] property "%s" does not exist',v[2][s]))}C=C[v[2][s]]}}else{if(v[1]){C=w[v[1]]}else{C=w[B++]}}if(/[^s]/.test(v[8])&&(n(C)!="number")){throw new Error(h("[_.sprintf] expecting number but found %s",n(C)))}switch(v[8]){case"b":C=C.toString(2);break;case"c":C=String.fromCharCode(C);break;case"d":C=parseInt(C,10);break;case"e":C=v[7]?C.toExponential(v[7]):C.toExponential();break;case"f":C=v[7]?parseFloat(C).toFixed(v[7]):parseFloat(C);break;case"o":C=C.toString(8);break;case"s":C=((C=String(C))&&v[7]?C.substring(0,v[7]):C);break;case"u":C=Math.abs(C);break;case"x":C=C.toString(16);break;case"X":C=C.toString(16).toUpperCase();break}C=(/[def]/.test(v[8])&&v[3]&&C>=0?"+"+C:C);y=v[4]?v[4]=="0"?"0":v[4].charAt(1):" ";A=v[6]-String(C).length;r=v[6]?o(y,A):"";q.push(v[5]?C+r:r+C)}}}return q.join("")};p.cache={};p.parse=function(q){var t=q,u=[],w=[],v=0;while(t){if((u=/^[^\x25]+/.exec(t))!==null){w.push(u[0])}else{if((u=/^\x25{2}/.exec(t))!==null){w.push("%")}else{if((u=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t))!==null){if(u[2]){v|=1;var x=[],s=u[2],r=[];if((r=/^([a-z_][a-z_\d]*)/i.exec(s))!==null){x.push(r[1]);while((s=s.substring(r[0].length))!==""){if((r=/^\.([a-z_][a-z_\d]*)/i.exec(s))!==null){x.push(r[1])}else{if((r=/^\[(\d+)\]/.exec(s))!==null){x.push(r[1])}else{throw new Error("[_.sprintf] huh?")}}}}else{throw new Error("[_.sprintf] huh?")}u[2]=x}else{v|=2}if(v===3){throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported")}w.push(u)}else{throw new Error("[_.sprintf] huh?")}}}t=t.substring(u[0].length)}return w};return p})();var m={VERSION:"2.2.0rc",isBlank:function(n){return(/^\s*$/).test(n)},stripTags:function(n){return(""+n).replace(/<\/?[^>]+>/g,"")},capitalize:function(n){n+="";return n.charAt(0).toUpperCase()+n.substring(1)},chop:function(q,p){q=q+"";p=~~p||q.length;var n=[];for(var o=0;o<q.length;o+=p){n.push(q.slice(o,o+p))}return n},clean:function(n){return m.strip(n).replace(/\s+/g," ")},count:function(o,n){o+="";n+="";return o.split(n).length-1},chars:function(n){return(""+n).split("")},escapeHTML:function(n){return(""+n).replace(/[&<>"']/g,function(o){return"&"+d[o]+";"})},unescapeHTML:function(n){return(""+n).replace(/\&([^;]+);/g,function(o,q){var p;if(q in f){return f[q]}else{if(p=q.match(/^#x([\da-fA-F]+)$/)){return String.fromCharCode(parseInt(p[1],16))}else{if(p=q.match(/^#(\d+)$/)){return String.fromCharCode(~~p[1])}else{return o}}}})},escapeRegExp:function(n){return n.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},insert:function(q,o,p){var n=m.chars(q);n.splice(~~o,0,""+p);return n.join("")},include:function(o,n){return !!~(""+o).indexOf(n)},join:function(){var n=k(arguments);return n.join(n.shift())},lines:function(n){return(""+n).split("\n")},reverse:function(n){return m.chars(n).reverse().join("")},splice:function(r,o,q,p){var n=m.chars(r);n.splice(~~o,~~q,p);return n.join("")},startsWith:function(o,n){o+="";n+="";return o.length>=n.length&&o.substring(0,n.length)===n},endsWith:function(o,n){o+="";n+="";return o.length>=n.length&&o.substring(o.length-n.length)===n},succ:function(o){o+="";var n=m.chars(o);n.splice(o.length-1,1,String.fromCharCode(o.charCodeAt(o.length-1)+1));return n.join("")},titleize:function(n){return(""+n).replace(/\b./g,function(o){return o.toUpperCase()})},camelize:function(n){return m.trim(n).replace(/[-_\s]+(.)?/g,function(o,p){return p&&p.toUpperCase()})},underscored:function(n){return m.trim(n).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(n){return m.trim(n).replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase()},classify:function(n){n+="";return m.titleize(n.replace(/_/g," ")).replace(/\s/g,"")},humanize:function(n){return m.capitalize(this.underscored(n).replace(/_id$/,"").replace(/_/g," "))},trim:function(o,n){o+="";if(!n&&c){return c.call(o)}n=j(n);return o.replace(new RegExp("^"+n+"+|"+n+"+$","g"),"")},ltrim:function(o,n){o+="";if(!n&&g){return g.call(o)}n=j(n);return o.replace(new RegExp("^"+n+"+"),"")},rtrim:function(o,n){o+="";if(!n&&b){return b.call(o)}n=j(n);return o.replace(new RegExp(n+"+$"),"")},truncate:function(p,o,n){p+="";n=n||"...";o=~~o;return p.length>o?p.slice(0,o)+n:p},prune:function(r,q,s){r+="";q=~~q;s=s!=null?""+s:"...";var p,n,o=r.replace(/\W/g,function(t){return(t.toUpperCase()!==t.toLowerCase())?"A":" "});n=o.charAt(q);p=o.slice(0,q);if(n&&n.match(/\S/)){p=p.replace(/\s\S+$/,"")}p=m.rtrim(p);return(p+s).length>r.length?r:r.substring(0,p.length)+s},words:function(o,n){return m.trim(o,n).split(n||/\s+/)},pad:function(r,p,n,o){r+="";var q=0;p=~~p;if(!n){n=" "}else{if(n.length>1){n=n.charAt(0)}}switch(o){case"right":q=(p-r.length);return r+a(n,q);case"both":q=(p-r.length);return a(n,Math.ceil(q/2))+r+a(n,Math.floor(q/2));default:q=(p-r.length);return a(n,q)+r}},lpad:function(p,o,n){return m.pad(p,o,n)},rpad:function(p,o,n){return m.pad(p,o,n,"right")},lrpad:function(p,o,n){return m.pad(p,o,n,"both")},sprintf:h,vsprintf:function(o,n){n.unshift(o);return h.apply(null,n)},toNumber:function(p,n){p+="";var o=e(e(p).toFixed(~~n));return o===0&&!p.match(/^0+$/)?Number.NaN:o},strRight:function(o,n){o+="";n=n!=null?""+n:n;var p=!n?-1:o.indexOf(n);return ~p?o.slice(p+n.length,o.length):o},strRightBack:function(o,n){o+="";n=n!=null?""+n:n;var p=!n?-1:o.lastIndexOf(n);return ~p?o.slice(p+n.length,o.length):o},strLeft:function(o,n){o+="";n=n!=null?""+n:n;var p=!n?-1:o.indexOf(n);return ~p?o.slice(0,p):o},strLeftBack:function(o,n){o+="";n=n!=null?""+n:n;var p=o.lastIndexOf(n);return ~p?o.slice(0,p):o},toSentence:function(s,q,o){q||(q=", ");o||(o=" and ");var p=s.length,r="";for(var n=0;n<p;n++){r+=s[n];if(n===(p-2)){r+=o}else{if(n<(p-1)){r+=q}}}return r},slugify:function(o){var q="ąàáäâãćęèéëêìíïîłńòóöôõùúüûñçżź",p="aaaaaaceeeeeiiiilnooooouuuunczz",n=new RegExp(j(q),"g");o=(""+o).toLowerCase();o=o.replace(n,function(s){var r=q.indexOf(s);return p.charAt(r)||"-"});return m.trim(o.replace(/[^\w\s-]/g,"").replace(/[-\s]+/g,"-"),"-")},exports:function(){var n={};for(var o in this){if(!this.hasOwnProperty(o)||~m.words("include contains reverse").indexOf(o)){continue}n[o]=this[o]}return n},repeat:a};m.strip=m.trim;m.lstrip=m.ltrim;m.rstrip=m.rtrim;m.center=m.lrpad;m.rjust=m.lpad;m.ljust=m.rpad;m.contains=m.include;if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){module.exports=m}exports._s=m}else{if(typeof define==="function"&&define.amd){define("underscore.string",function(){return m})}else{i._=i._||{};i._.string=i._.str=m}}}(this||window));