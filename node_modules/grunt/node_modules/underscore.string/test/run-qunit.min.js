function waitFor(f,b,d){var a,e=new Date().getTime();setInterval(function c(){if((new Date().getTime()-e<d)&&!a){a=f()}else{if(!a){phantom.exit(1)}else{b();clearInterval(c)}}},100)}var page=new WebPage();page.onConsoleMessage=function(a){console.log(a)};page.open(phantom.args[0],function(a){waitFor(function(){return page.evaluate(function(){var b=document.getElementById("qunit-testresult");return b&&b.innerText.match("completed")})},function(){var b=page.evaluate(function(){var e=document.getElementById("qunit-testresult"),c=document.getElementsByClassName("fail");for(var d=0;d<c.length;d++){console.log(c[d].innerText)}console.log(e.innerText);return parseInt(e.getElementsByClassName("failed")[0].innerHTML)});phantom.exit(b>0?1:0)},10000)});