(function(z){var y=String.prototype.trim,x=String.prototype.trimRight,w=String.prototype.trimLeft,v=function(b){return b*1||0},u=function(f,e,h){f+="",e=~~e;for(var g=[];e>0;g[--e]=f){}return g.join(h==null?"":h)},t=function(b){return Array.prototype.slice.call(b)},s=function(b){return b!=null?"["+n.escapeRegExp(""+b)+"]":"\\s"},r={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},q={};for(var p in r){q[r[p]]=p}var o=function(){function e(b){return Object.prototype.toString.call(b).slice(8,-1).toLowerCase()}var d=u,f=function(){return f.cache.hasOwnProperty(arguments[0])||(f.cache[arguments[0]]=f.parse(arguments[0])),f.format.call(null,f.cache[arguments[0]],arguments)};return f.format=function(J,I){var H=1,G=J.length,F="",E,D=[],C,B,A,l,b,a;for(C=0;C<G;C++){F=e(J[C]);if(F==="string"){D.push(J[C])}else{if(F==="array"){A=J[C];if(A[2]){E=I[H];for(B=0;B<A[2].length;B++){if(!E.hasOwnProperty(A[2][B])){throw new Error(o('[_.sprintf] property "%s" does not exist',A[2][B]))}E=E[A[2][B]]}}else{A[1]?E=I[A[1]]:E=I[H++]}if(/[^s]/.test(A[8])&&e(E)!="number"){throw new Error(o("[_.sprintf] expecting number but found %s",e(E)))}switch(A[8]){case"b":E=E.toString(2);break;case"c":E=String.fromCharCode(E);break;case"d":E=parseInt(E,10);break;case"e":E=A[7]?E.toExponential(A[7]):E.toExponential();break;case"f":E=A[7]?parseFloat(E).toFixed(A[7]):parseFloat(E);break;case"o":E=E.toString(8);break;case"s":E=(E=String(E))&&A[7]?E.substring(0,A[7]):E;break;case"u":E=Math.abs(E);break;case"x":E=E.toString(16);break;case"X":E=E.toString(16).toUpperCase()}E=/[def]/.test(A[8])&&A[3]&&E>=0?"+"+E:E,b=A[4]?A[4]=="0"?"0":A[4].charAt(1):" ",a=A[6]-String(E).length,l=A[6]?d(b,a):"",D.push(A[5]?E+l:l+E)}}}return D.join("")},f.cache={},f.parse=function(j){var i=j,C=[],B=[],A=0;while(i){if((C=/^[^\x25]+/.exec(i))!==null){B.push(C[0])}else{if((C=/^\x25{2}/.exec(i))!==null){B.push("%")}else{if((C=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(i))===null){throw new Error("[_.sprintf] huh?")}if(C[2]){A|=1;var m=[],l=C[2],k=[];if((k=/^([a-z_][a-z_\d]*)/i.exec(l))===null){throw new Error("[_.sprintf] huh?")}m.push(k[1]);while((l=l.substring(k[0].length))!==""){if((k=/^\.([a-z_][a-z_\d]*)/i.exec(l))!==null){m.push(k[1])}else{if((k=/^\[(\d+)\]/.exec(l))===null){throw new Error("[_.sprintf] huh?")}m.push(k[1])}}C[2]=m}else{A|=2}if(A===3){throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported")}B.push(C)}}i=i.substring(C[0].length)}return B},f}(),n={VERSION:"2.1.1",isBlank:function(b){return/^\s*$/.test(b)},stripTags:function(b){return(""+b).replace(/<\/?[^>]+>/g,"")},capitalize:function(b){return b+="",b.charAt(0).toUpperCase()+b.substring(1)},chop:function(f,e){f+="",e=~~e||f.length;var h=[];for(var g=0;g<f.length;g+=e){h.push(f.slice(g,g+e))}return h},clean:function(b){return n.strip(b).replace(/\s+/g," ")},count:function(d,c){return d+="",c+="",d.split(c).length-1},chars:function(b){return(""+b).split("")},escapeHTML:function(b){return(""+b).replace(/[&<>"']/g,function(c){return"&"+q[c]+";"})},unescapeHTML:function(b){return(""+b).replace(/\&([^;]+);/g,function(e,d){var f;return d in r?r[d]:(f=d.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(f[1],16)):(f=d.match(/^#(\d+)$/))?String.fromCharCode(~~f[1]):e})},escapeRegExp:function(b){return b.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},insert:function(f,e,h){var g=n.chars(f);return g.splice(~~e,0,""+h),g.join("")},include:function(d,c){return !!~(""+d).indexOf(c)},join:function(){var b=t(arguments);return b.join(b.shift())},lines:function(b){return(""+b).split("\n")},reverse:function(b){return n.chars(b).reverse().join("")},splice:function(g,f,j,i){var h=n.chars(g);return h.splice(~~f,~~j,i),h.join("")},startsWith:function(d,c){return d+="",c+="",d.length>=c.length&&d.substring(0,c.length)===c},endsWith:function(d,c){return d+="",c+="",d.length>=c.length&&d.substring(d.length-c.length)===c},succ:function(d){d+="";var c=n.chars(d);return c.splice(d.length-1,1,String.fromCharCode(d.charCodeAt(d.length-1)+1)),c.join("")},titleize:function(b){return(""+b).replace(/\b./g,function(c){return c.toUpperCase()})},camelize:function(b){return n.trim(b).replace(/[-_\s]+(.)?/g,function(d,c){return c&&c.toUpperCase()})},underscored:function(b){return n.trim(b).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(b){return n.trim(b).replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase()},classify:function(b){return b+="",n.titleize(b.replace(/_/g," ")).replace(/\s/g,"")},humanize:function(b){return n.capitalize(this.underscored(b).replace(/_id$/,"").replace(/_/g," "))},trim:function(b,d){return b+="",!d&&y?y.call(b):(d=s(d),b.replace(new RegExp("^"+d+"+|"+d+"+$","g"),""))},ltrim:function(d,c){return d+="",!c&&w?w.call(d):(c=s(c),d.replace(new RegExp("^"+c+"+"),""))},rtrim:function(d,c){return d+="",!c&&x?x.call(d):(c=s(c),d.replace(new RegExp(c+"+$"),""))},truncate:function(e,d,f){return e+="",f=f||"...",d=~~d,e.length>d?e.slice(0,d)+f:e},prune:function(h,g,l){h+="",g=~~g,l=l!=null?""+l:"...";var k,j,i=h.replace(/\W/g,function(b){return b.toUpperCase()!==b.toLowerCase()?"A":" "});return j=i.charAt(g),k=i.slice(0,g),j&&j.match(/\S/)&&(k=k.replace(/\s\S+$/,"")),k=n.rtrim(k),(k+l).length>h.length?h:h.substring(0,k.length)+l},words:function(d,c){return n.trim(d,c).split(c||/\s+/)},pad:function(g,f,j,i){g+="";var h=0;f=~~f,j?j.length>1&&(j=j.charAt(0)):j=" ";switch(i){case"right":return h=f-g.length,g+u(j,h);case"both":return h=f-g.length,u(j,Math.ceil(h/2))+g+u(j,Math.floor(h/2));default:return h=f-g.length,u(j,h)+g}},lpad:function(e,d,f){return n.pad(e,d,f)},rpad:function(e,d,f){return n.pad(e,d,f,"right")},lrpad:function(e,d,f){return n.pad(e,d,f,"both")},sprintf:o,vsprintf:function(d,c){return c.unshift(d),o.apply(null,c)},toNumber:function(e,d){e+="";var f=v(v(e).toFixed(~~d));return f===0&&!e.match(/^0+$/)?Number.NaN:f},strRight:function(e,d){e+="",d=d!=null?""+d:d;var f=d?e.indexOf(d):-1;return ~f?e.slice(f+d.length,e.length):e},strRightBack:function(e,d){e+="",d=d!=null?""+d:d;var f=d?e.lastIndexOf(d):-1;return ~f?e.slice(f+d.length,e.length):e},strLeft:function(e,d){e+="",d=d!=null?""+d:d;var f=d?e.indexOf(d):-1;return ~f?e.slice(0,f):e},strLeftBack:function(e,d){e+="",d=d!=null?""+d:d;var f=e.lastIndexOf(d);return ~f?e.slice(0,f):e},toSentence:function(h,g,l){g||(g=", "),l||(l=" and ");var k=h.length,j="";for(var i=0;i<k;i++){j+=h[i],i===k-2?j+=l:i<k-1&&(j+=g)}return j},slugify:function(f){var e="ąàáäâãćęèéëêìíïîłńòóöôõùúüûñçżź",h="aaaaaaceeeeeiiiilnooooouuuunczz",g=new RegExp(s(e),"g");return f=(""+f).toLowerCase(),f=f.replace(g,function(b){var c=e.indexOf(b);return h.charAt(c)||"-"}),n.trim(f.replace(/[^\w\s-]/g,"").replace(/[-\s]+/g,"-"),"-")},exports:function(){var d={};for(var c in this){if(!this.hasOwnProperty(c)||~n.words("include contains reverse").indexOf(c)){continue}d[c]=this[c]}return d},repeat:u};n.strip=n.trim,n.lstrip=n.ltrim,n.rstrip=n.rtrim,n.center=n.lrpad,n.rjust=n.lpad,n.ljust=n.rpad,n.contains=n.include,typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(module.exports=n),exports._s=n):typeof define=="function"&&define.amd?define("underscore.string",function(){return n}):(z._=z._||{},z._.string=z._.str=n)})(this||window);