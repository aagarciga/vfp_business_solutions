(function(b){var g=[].slice;var f={}.toString;function e(h){this.value=h}function a(h){this.value=h}function c(i,h){this.context=i;this.args=h}b.override=function(h){return new e(h)};b.preempt=function(h){return new a(h)};b.filter=function(i,h){return new c(i,h)};function d(k,j,m){var l;if(typeof j==="string"){j=[j]}else{if(j==null){j=[];for(l in k){if(k.hasOwnProperty(l)){j.push(l)}}}}var h=j.length;while(h--){if(f.call(k[j[h]])!=="[object Function]"||m(k,j[h])===false){j.splice(h,1)}}return j}b.hook=function(j,i,h){if(h==null){h=i;i=null}if(typeof h==="function"){h={pre:h}}return d(j,i,function(l,n){var m=l[n];function k(){var o,r,q;var p=g.call(arguments);if(h.passName){p.unshift(n)}if(h.pre){o=h.pre.apply(this,p)}if(o instanceof c){r=o=m.apply(o.context,o.args)}else{if(o instanceof a){r=o=o.value}else{r=m.apply(this,arguments);o=o instanceof e?o.value:r}}if(h.post){q=h.post.apply(this,[r].concat(p));if(q instanceof e){o=q.value}}if(h.once){b.unhook(l,n)}return o}l[n]=k;if(l[n]!==k){return false}l[n]._orig=m})};b.orig=function(h,i){return h[i]._orig};b.unhook=function(i,h){return d(i,h,function(j,l){var k=b.orig(j,l);if(!k){return false}j[l]=k})}}(typeof exports==="object"&&exports||this));