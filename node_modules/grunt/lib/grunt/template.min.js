"use strict";var grunt=require("../grunt");var template=module.exports={};template.date=require("dateformat");template.today=function(a){return template.date(new Date(),a)};var allDelimiters={};template.addDelimiters=function(e,f,h){var g=allDelimiters[e]={};g.opener=f;g.closer=h;var d=g.opener.replace(/(.)/g,"\\$1");var c="([\\s\\S]+?)"+g.closer.replace(/(.)/g,"\\$1");g.lodash={evaluate:new RegExp(d+c,"g"),interpolate:new RegExp(d+"="+c,"g"),escape:new RegExp(d+"-"+c,"g")}};template.addDelimiters("config","<%","%>");template.setDelimiters=function(a){var b=allDelimiters[a in allDelimiters?a:"config"];grunt.util._.templateSettings=b.lodash;return b};template.process=function(a,b){if(!b){b={}}var g=template.setDelimiters(b.delimiters);var d=Object.create(b.data||grunt.config.data||{});if(!("grunt" in d)){d.grunt=grunt}var c=a;try{while(a.indexOf(g.opener)>=0){a=grunt.util._.template(a,d);if(a===c){break}c=a}}catch(f){if(String(f)==="SyntaxError: Unexpected token ILLEGAL"&&/\n|\r/.test(a)){grunt.log.errorlns("A special character was detected in this template. Inside template tags, the \\n and \\r special characters must be escaped as \\\\n and \\\\r. (grunt 0.4.0+)")}f.message="An error occurred while processing a template ("+f.message+").";grunt.warn(f,grunt.fail.code.TEMPLATE_ERROR)}return grunt.util.normalizelf(a)};