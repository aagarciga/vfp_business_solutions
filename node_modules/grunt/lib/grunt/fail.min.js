"use strict";var grunt=require("../grunt");var fail=module.exports={};fail.code={FATAL_ERROR:1,MISSING_GRUNTFILE:2,TASK_FAILURE:3,TEMPLATE_ERROR:4,INVALID_AUTOCOMPLETE:5,WARNING:6,};function writeln(a,c){grunt.log.muted=false;var b=String(a.message||a);if(!grunt.option("no-color")){b+="\x07"}if(c==="warn"){b="Warning: "+b+" ";b+=(grunt.option("force")?"Used --force, continuing.".underline:"Use --force to continue.");b=b.yellow}else{b=("Fatal error: "+b).red}grunt.log.writeln(b)}function dumpStack(a){if(grunt.option("stack")){if(a.origError&&a.origError.stack){console.log(a.origError.stack)}else{if(a.stack){console.log(a.stack)}}}}fail.fatal=function(b,a){writeln(b,"fatal");dumpStack(b);grunt.util.exit(typeof a==="number"?a:fail.code.FATAL_ERROR)};fail.errorcount=0;fail.warncount=0;fail.warn=function(c,b){var a=typeof c==="string"?c:c.message;fail.warncount++;writeln(a,"warn");if(!grunt.option("force")){dumpStack(c);grunt.log.writeln().fail("Aborted due to warnings.");grunt.util.exit(typeof b==="number"?b:fail.code.WARNING)}};fail.report=function(){if(fail.warncount>0){grunt.log.writeln().fail("Done, but with warnings.")}else{grunt.log.writeln().success("Done, without errors.")}};