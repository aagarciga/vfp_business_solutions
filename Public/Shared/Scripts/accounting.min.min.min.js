/*!
 * accounting.js v0.4.2, copyright 2014 Open Exchange Rates, MIT license, http://openexchangerates.github.io/accounting.js
 */
(function(u,n){function v(a){return !!(""===a||a&&a.charCodeAt&&a.substr)}function q(a){return z?z(a):"[object Array]"===A.call(a)}function w(a){return"[object Object]"===A.call(a)}function x(b,d){var a,b=b||{},d=d||{};for(a in d){d.hasOwnProperty(a)&&null==b[a]&&(b[a]=d[a])}return b}function p(a,b,e){var d=[],f,g;if(!a){return d}if(c&&a.map===c){return a.map(b,e)}for(f=0,g=a.length;f<g;f++){d[f]=b.call(e,a[f],f,a)}return d}function r(a,b){a=Math.round(Math.abs(a));return isNaN(a)?b:a}function j(a){var b=o.settings.currency.format;"function"===typeof a&&(a=a());return v(a)&&a.match("%v")?{pos:a,neg:a.replace("-","").replace("%v","-%v"),zero:a}:!a||!a.pos||!a.pos.match("%v")?!v(b)?b:o.settings.currency.format={pos:b,neg:b.replace("%v","-%v"),zero:b}:a}var o={version:"0.4.1",settings:{currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}}},c=Array.prototype.map,z=Array.isArray,A=Object.prototype.toString,s=o.unformat=o.parse=function(a,b){if(q(a)){return p(a,function(e){return s(e,b)})}a=a||0;if("number"===typeof a){return a}var b=b||".",d=RegExp("[^0-9-"+b+"]",["g"]),d=parseFloat((""+a).replace(/\((.*)\)/,"-$1").replace(d,"").replace(b,"."));return !isNaN(d)?d:0},m=o.toFixed=function(b,d){var d=r(d,o.settings.number.precision),a=Math.pow(10,d);return(Math.round(o.unformat(b)*a)/a).toFixed(d)},y=o.formatNumber=o.format=function(k,a,b,h){if(q(k)){return p(k,function(l){return y(l,a,b,h)})}var k=s(k),d=x(w(a)?a:{precision:a,thousand:b,decimal:h},o.settings.number),g=r(d.precision),e=0>k?"-":"",f=parseInt(m(Math.abs(k||0),g),10)+"",i=3<f.length?f.length%3:0;return e+(i?f.substr(0,i)+d.thousand:"")+f.substr(i).replace(/(\d{3})(?=\d)/g,"$1"+d.thousand)+(g?d.decimal+m(Math.abs(k),g).split(".")[1]:"")},t=o.formatMoney=function(b,i,d,a,e,h){if(q(b)){return p(b,function(k){return t(k,i,d,a,e,h)})}var b=s(b),f=x(w(i)?i:{symbol:i,precision:d,thousand:a,decimal:e,format:h},o.settings.currency),g=j(f.format);return(0<b?g.pos:0>b?g.neg:g.zero).replace("%s",f.symbol).replace("%v",y(Math.abs(b),r(f.precision),f.thousand,f.decimal))};o.formatColumn=function(k,l,a,g,b,f){if(!k){return[]}var d=x(w(l)?l:{symbol:l,precision:a,thousand:g,decimal:b,format:f},o.settings.currency),e=j(d.format),i=e.pos.indexOf("%s")<e.pos.indexOf("%v")?!0:!1,h=0,k=p(k,function(B){if(q(B)){return o.formatColumn(B,d)}B=s(B);B=(0<B?e.pos:0>B?e.neg:e.zero).replace("%s",d.symbol).replace("%v",y(Math.abs(B),r(d.precision),d.thousand,d.decimal));if(B.length>h){h=B.length}return B});return p(k,function(B){return v(B)&&B.length<h?i?B.replace(d.symbol,d.symbol+Array(h-B.length+1).join(" ")):Array(h-B.length+1).join(" ")+B:B})};if("undefined"!==typeof exports){if("undefined"!==typeof module&&module.exports){exports=module.exports=o}exports.accounting=o}else{"function"===typeof define&&define.amd?define([],function(){return o}):(o.noConflict=function(a){return function(){u.accounting=a;o.noConflict=n;return o}}(u.accounting),u.accounting=o)}})(this);