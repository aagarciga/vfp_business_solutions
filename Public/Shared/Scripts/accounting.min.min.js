/*!
 * accounting.js v0.4.2, copyright 2014 Open Exchange Rates, MIT license, http://openexchangerates.github.io/accounting.js
 */
(function(d,l){function b(c){return !!(""===c||c&&c.charCodeAt&&c.substr)}function h(c){return F?F(c):"[object Array]"===E.call(c)}function a(c){return"[object Object]"===E.call(c)}function H(j,c){var m,j=j||{},c=c||{};for(m in c){c.hasOwnProperty(m)&&null==j[m]&&(j[m]=c[m])}return j}function i(m,j,p){var q=[],o,n;if(!m){return q}if(D&&m.map===D){return m.map(j,p)}for(o=0,n=m.length;o<n;o++){q[o]=j.call(p,m[o],o,m)}return q}function g(j,c){j=Math.round(Math.abs(j));return isNaN(j)?c:j}function C(j){var c=k.settings.currency.format;"function"===typeof j&&(j=j());return b(j)&&j.match("%v")?{pos:j,neg:j.replace("-","").replace("%v","-%v"),zero:j}:!j||!j.pos||!j.pos.match("%v")?!b(c)?c:k.settings.currency.format={pos:c,neg:c.replace("%v","-%v"),zero:c}:j}var k={version:"0.4.1",settings:{currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}}},D=Array.prototype.map,F=Array.isArray,E=Object.prototype.toString,f=k.unformat=k.parse=function(m,j){if(h(m)){return i(m,function(c){return f(c,j)})}m=m||0;if("number"===typeof m){return m}var j=j||".",n=RegExp("[^0-9-"+j+"]",["g"]),n=parseFloat((""+m).replace(/\((.*)\)/,"-$1").replace(n,"").replace(j,"."));return !isNaN(n)?n:0},B=k.toFixed=function(j,c){var c=g(c,k.settings.number.precision),m=Math.pow(10,c);return(Math.round(k.unformat(j)*m)/m).toFixed(c)},G=k.formatNumber=k.format=function(s,r,q,j){if(h(s)){return i(s,function(t){return G(t,r,q,j)})}var s=f(s),p=H(a(r)?r:{precision:r,thousand:q,decimal:j},k.settings.number),m=g(p.precision),o=0>s?"-":"",n=parseInt(B(Math.abs(s||0),m),10)+"",c=3<n.length?n.length%3:0;return o+(c?n.substr(0,c)+p.thousand:"")+n.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+p.thousand)+(m?p.decimal+B(Math.abs(s),m).split(".")[1]:"")},e=k.formatMoney=function(j,c,r,m,q,n){if(h(j)){return i(j,function(s){return e(s,c,r,m,q,n)})}var j=f(j),p=H(a(c)?c:{symbol:c,precision:r,thousand:m,decimal:q,format:n},k.settings.currency),o=C(p.format);return(0<j?o.pos:0>j?o.neg:o.zero).replace("%s",p.symbol).replace("%v",G(Math.abs(j),g(p.precision),p.thousand,p.decimal))};k.formatColumn=function(t,s,r,m,q,n){if(!t){return[]}var p=H(a(s)?s:{symbol:s,precision:r,thousand:m,decimal:q,format:n},k.settings.currency),o=C(p.format),c=o.pos.indexOf("%s")<o.pos.indexOf("%v")?!0:!1,j=0,t=i(t,function(u){if(h(u)){return k.formatColumn(u,p)}u=f(u);u=(0<u?o.pos:0>u?o.neg:o.zero).replace("%s",p.symbol).replace("%v",G(Math.abs(u),g(p.precision),p.thousand,p.decimal));if(u.length>j){j=u.length}return u});return i(t,function(u){return b(u)&&u.length<j?c?u.replace(p.symbol,p.symbol+Array(j-u.length+1).join(" ")):Array(j-u.length+1).join(" ")+u:u})};if("undefined"!==typeof exports){if("undefined"!==typeof module&&module.exports){exports=module.exports=k}exports.accounting=k}else{"function"===typeof define&&define.amd?define([],function(){return k}):(k.noConflict=function(c){return function(){d.accounting=c;k.noConflict=l;return k}}(d.accounting),d.accounting=k)}})(this);