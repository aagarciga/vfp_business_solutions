(function(){var a=window.AmCharts;a.AmFunnelChart=a.Class({inherits:a.AmSlicedChart,construct:function(b){this.type="funnel";a.AmFunnelChart.base.construct.call(this,b);this.cname="AmFunnelChart";this.startX=this.startY=0;this.baseWidth="100%";this.neckHeight=this.neckWidth=0;this.rotate=!1;this.valueRepresents="height";this.pullDistance=30;this.labelPosition="center";this.labelText="[[title]]: [[value]]";this.balloonText="[[title]]: [[value]]\n[[description]]";a.applyTheme(this,b,this.cname)},drawChart:function(){a.AmFunnelChart.base.drawChart.call(this);var M=this.chartData;if(a.ifArray(M)){if(0<this.realWidth&&0<this.realHeight){var B=Math.round(this.depth3D*Math.cos(this.angle*Math.PI/180)),G=Math.round(-this.depth3D*Math.sin(this.angle*Math.PI/180)),y=this.container,A=this.startDuration,C=this.rotate,K=this.updateWidth();this.realWidth=K;var q=this.updateHeight();this.realHeight=q;var D=a.toCoordinate,c=D(this.marginLeft,K),e=D(this.marginRight,K),w=D(this.marginTop,q)+this.getTitleHeight(),D=D(this.marginBottom,q);0<B&&0>G&&(this.neckHeight=this.neckWidth=0,C?D-=G/2:w-=G/2);var e=K-c-e,h=a.toCoordinate(this.baseWidth,e),t=a.toCoordinate(this.neckWidth,e),g=q-D-w,l=a.toCoordinate(this.neckHeight,g),v=w+g-l;C&&(w=q-D,v=w-g+l);this.firstSliceY=w;a.VML&&(this.startAlpha=1);for(var x=e/2+c,n=(g-l)/((h-t)/2),d=1,k=h/2,h=(g-l)*(h+t)/2+t*l,r=w,I=0,l=0;l<M.length;l++){var E=M[l],m;if(!0!==E.hidden&&(this.showZeroSlices||0!==E.percents)){var b=[],H=[],F;if("height"==this.valueRepresents){F=g*E.percents/100}else{var f=-h*E.percents/100/2,z=k;m=-1/(2*n);F=Math.pow(z,2)-4*m*f;0>F&&(F=0);F=(Math.sqrt(F)-z)/(2*m);if(!C&&w>=v||C&&w<=v){F=2*-f/t}else{if(!C&&w+F>v||C&&w-F<v){m=C?Math.round(F+(w-F-v)):Math.round(F-(w+F-v)),F=m/n,F=m+2*(-f-(z-F/2)*m)/t}}}f=k-F/n;z=!1;!C&&w+F>v||C&&w-F<v?(f=t/2,b.push(x-k,x+k,x+f,x+f,x-f,x-f),C?(m=F+(w-F-v),w<v&&(m=0),H.push(w,w,w-m,w-F,w-F,w-m,w)):(m=F-(w+F-v),w>v&&(m=0),H.push(w,w,w+m,w+F,w+F,w+m,w)),z=!0):(b.push(x-k,x+k,x+f,x-f),C?H.push(w,w,w-F,w-F):H.push(w,w,w+F,w+F));m=y.set();0<B&&0>G?(H=f/k,b=-1,C||(b=1),isNaN(d)&&(d=0),b=(new a.Cuboid(y,2*k,b*F,B,G*d,E.color,E.alpha,this.outlineThickness,this.outlineColor,this.outlineAlpha,90,0,!1,0,E.pattern,H)).set,b.translate(x-k,w-G/2*d),d*=H):b=a.polygon(y,b,H,E.color,E.alpha,this.outlineThickness,this.outlineColor,this.outlineAlpha);a.setCN(this,m,"funnel-item");a.setCN(this,b,"funnel-slice");a.setCN(this,m,E.className,!0);m.push(b);this.graphsSet.push(m);C||m.toBack();E.wedge=m;E.index=l;if(H=this.gradientRatio){var u=[],p;for(p=0;p<H.length;p++){u.push(a.adjustLuminosity(E.color,H[p]))}0<u.length&&b.gradient("linearGradient",u);E.pattern&&b.pattern(E.pattern,NaN,this.path)}0<A&&(this.chartCreated||m.setAttr("opacity",this.startAlpha));this.addEventListeners(m,E);E.ty0=w-F/2;this.labelsEnabled&&this.labelText&&E.percents>=this.hideLabelsPercent&&(H=this.formatString(this.labelText,E),(b=this.labelFunction)&&(H=b(E,H)),u=E.labelColor,u||(u=this.color),b=this.labelPosition,p="left","center"==b&&(p="middle"),"left"==b&&(p="right"),""!==H&&(H=a.wrappedText(y,H,u,this.fontFamily,this.fontSize,p,!1,this.maxLabelWidth),a.setCN(this,H,"funnel-label"),a.setCN(this,H,E.className,!0),H.node.style.pointerEvents="none",m.push(H),u=x,C?(p=w-F/2,E.ty0=p):(p=w+F/2,E.ty0=p,p<r+I+5&&(p=r+I+5),p>q-D&&(p=q-D)),"right"==b&&(u=e+10+c,E.tx0=x+(k-F/2/n),z&&(E.tx0=x+f)),"left"==b&&(E.tx0=x-(k-F/2/n),z&&(E.tx0=x-f),u=c),E.label=H,E.labelX=u,E.labelY=p,E.labelHeight=H.getBBox().height,H.translate(u,p),k=H.getBBox(),r=a.rect(y,k.width+5,k.height+5,"#ffffff",0.005),r.translate(u+k.x,p+k.y),m.push(r),E.hitRect=r,I=H.getBBox().height,r=p));(0===E.alpha||0<A&&!this.chartCreated)&&m.hide();w=C?w-F:w+F;k=f;E.startX=a.toCoordinate(this.startX,K);E.startY=a.toCoordinate(this.startY,q);E.pullX=a.toCoordinate(this.pullDistance,K);E.pullY=0;E.balloonX=x;E.balloonY=E.ty0}}this.arrangeLabels();this.initialStart();(M=this.legend)&&M.invalidateSize()}else{this.cleanChart()}}this.dispDUpd()},arrangeLabels:function(){var q=this.rotate,b;b=q?0:this.realHeight;for(var e=0,w=this.chartData,y=w.length,c,f=0;f<y;f++){c=w[y-f-1];var n=c.label,d=c.labelY,g=c.labelX,l=c.labelHeight,r=d;q?b+e+5>d&&(r=b+e+5):d+l+5>b&&(r=b-5-l);b=r;e=l;n&&(n.translate(g,r),n=n.getBBox(),c.hitRect&&c.hitRect.translate(g+n.x,r+n.y));c.labelY=r;c.tx=g;c.ty=r;c.tx2=g}"center"!=this.labelPosition&&this.drawTicks()}})})();(function(){var a=window.AmCharts;a.Cuboid=a.Class({construct:function(w,I,g,F,H,d,l,c,f,n,q,y,E,e,r,b,D){this.set=w.set();this.container=w;this.h=Math.round(g);this.w=Math.round(I);this.dx=F;this.dy=H;this.colors=d;this.alpha=l;this.bwidth=c;this.bcolor=f;this.balpha=n;this.dashLength=e;this.topRadius=b;this.pattern=r;this.rotate=E;this.bcn=D;E?0>I&&0===q&&(q=180):0>g&&270==q&&(q=90);this.gradientRotation=q;0===F&&0===H&&(this.cornerRadius=y);this.draw()},draw:function(){var z=this.set;z.clear();var l=this.container,w=l.chart,f=this.w,h=this.h,n=this.dx,y=this.dy,F=this.colors,q=this.alpha,A=this.bwidth,B=this.bcolor,d=this.balpha,c=this.gradientRotation,m=this.cornerRadius,b=this.dashLength,e=this.pattern,H=this.topRadius,I=this.bcn,g=F,K=F;"object"==typeof F&&(g=F[0],K=F[F.length-1]);var C,k,M,u,D,J,x,v,L,r=q;e&&(q=0);var G,E,p,t,N=this.rotate;if(0<Math.abs(n)||0<Math.abs(y)){if(isNaN(H)){x=K,K=a.adjustLuminosity(g,-0.2),K=a.adjustLuminosity(g,-0.2),C=a.polygon(l,[0,n,f+n,f,0],[0,y,y,0,0],K,q,1,B,0,c),0<d&&(L=a.line(l,[0,n,f+n],[0,y,y],B,d,A,b)),k=a.polygon(l,[0,0,f,f,0],[0,h,h,0,0],K,q,1,B,0,c),k.translate(n,y),0<d&&(M=a.line(l,[n,n],[y,y+h],B,d,A,b)),u=a.polygon(l,[0,0,n,n,0],[0,h,h+y,y,0],K,q,1,B,0,c),D=a.polygon(l,[f,f,f+n,f+n,f],[0,h,h+y,y,0],K,q,1,B,0,c),0<d&&(J=a.line(l,[f,f+n,f+n,f],[0,y,h+y,h],B,d,A,b)),K=a.adjustLuminosity(x,0.2),x=a.polygon(l,[0,n,f+n,f,0],[h,h+y,h+y,h,h],K,q,1,B,0,c),0<d&&(v=a.line(l,[0,n,f+n],[h,h+y,h+y],B,d,A,b))}else{var O,P,Q;N?(O=h/2,K=n/2,Q=h/2,P=f+n/2,E=Math.abs(h/2),G=Math.abs(n/2)):(K=f/2,O=y/2,P=f/2,Q=h+y/2+1,G=Math.abs(f/2),E=Math.abs(y/2));p=G*H;t=E*H;0.1<G&&0.1<G&&(C=a.circle(l,G,g,q,A,B,d,!1,E),C.translate(K,O));0.1<p&&0.1<p&&(x=a.circle(l,p,a.adjustLuminosity(g,0.5),q,A,B,d,!1,t),x.translate(P,Q))}}q=r;1>Math.abs(h)&&(h=0);1>Math.abs(f)&&(f=0);!isNaN(H)&&(0<Math.abs(n)||0<Math.abs(y))?(F=[g],F={fill:F,stroke:B,"stroke-width":A,"stroke-opacity":d,"fill-opacity":q},N?(q="M0,0 L"+f+","+(h/2-h/2*H),A=" B",0<f&&(A=" A"),a.VML?(q+=A+Math.round(f-p)+","+Math.round(h/2-t)+","+Math.round(f+p)+","+Math.round(h/2+t)+","+f+",0,"+f+","+h,q=q+(" L0,"+h)+(A+Math.round(-G)+","+Math.round(h/2-E)+","+Math.round(G)+","+Math.round(h/2+E)+",0,"+h+",0,0")):(q+="A"+p+","+t+",0,0,0,"+f+","+(h-h/2*(1-H))+"L0,"+h,q+="A"+G+","+E+",0,0,1,0,0"),G=90):(A=f/2-f/2*H,q="M0,0 L"+A+","+h,a.VML?(q="M0,0 L"+A+","+h,A=" B",0>h&&(A=" A"),q+=A+Math.round(f/2-p)+","+Math.round(h-t)+","+Math.round(f/2+p)+","+Math.round(h+t)+",0,"+h+","+f+","+h,q+=" L"+f+",0",q+=A+Math.round(f/2+G)+","+Math.round(E)+","+Math.round(f/2-G)+","+Math.round(-E)+","+f+",0,0,0"):(q+="A"+p+","+t+",0,0,0,"+(f-f/2*(1-H))+","+h+"L"+f+",0",q+="A"+G+","+E+",0,0,1,0,0"),G=180),l=l.path(q).attr(F),l.gradient("linearGradient",[g,a.adjustLuminosity(g,-0.3),a.adjustLuminosity(g,-0.3),g],G),N?l.translate(n/2,0):l.translate(0,y/2)):l=0===h?a.line(l,[0,f],[0,0],B,d,A,b):0===f?a.line(l,[0,0],[0,h],B,d,A,b):0<m?a.rect(l,f,h,F,q,A,B,d,m,c,b):a.polygon(l,[0,0,f,f,0],[0,h,h,0,0],F,q,A,B,d,c,!1,b);f=isNaN(H)?0>h?[C,L,k,M,u,D,J,x,v,l]:[x,v,k,M,u,D,C,L,J,l]:N?0<f?[C,l,x]:[x,l,C]:0>h?[C,l,x]:[x,l,C];a.setCN(w,l,I+"front");a.setCN(w,k,I+"back");a.setCN(w,x,I+"top");a.setCN(w,C,I+"bottom");a.setCN(w,u,I+"left");a.setCN(w,D,I+"right");for(C=0;C<f.length;C++){if(k=f[C]){z.push(k),a.setCN(w,k,I+"element")}}e&&l.pattern(e,NaN,w.path)},width:function(b){isNaN(b)&&(b=0);this.w=Math.round(b);this.draw()},height:function(b){isNaN(b)&&(b=0);this.h=Math.round(b);this.draw()},animateHeight:function(e,f){var b=this;b.easing=f;b.totalFrames=Math.round(1000*e/a.updateRate);b.rh=b.h;b.frame=0;b.height(1);setTimeout(function(){b.updateHeight.call(b)},a.updateRate)},updateHeight:function(){var d=this;d.frame++;var b=d.totalFrames;d.frame<=b&&(b=d.easing(0,d.frame,1,d.rh-1,b),d.height(b),setTimeout(function(){d.updateHeight.call(d)},a.updateRate))},animateWidth:function(e,f){var b=this;b.easing=f;b.totalFrames=Math.round(1000*e/a.updateRate);b.rw=b.w;b.frame=0;b.width(1);setTimeout(function(){b.updateWidth.call(b)},a.updateRate)},updateWidth:function(){var d=this;d.frame++;var b=d.totalFrames;d.frame<=b&&(b=d.easing(0,d.frame,1,d.rw-1,b),d.width(b),setTimeout(function(){d.updateWidth.call(d)},a.updateRate))}})})();