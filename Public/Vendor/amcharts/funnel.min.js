(function(){var b=window.AmCharts;b.AmFunnelChart=b.Class({inherits:b.AmSlicedChart,construct:function(a){this.type="funnel";b.AmFunnelChart.base.construct.call(this,a);this.cname="AmFunnelChart";this.startX=this.startY=0;this.baseWidth="100%";this.neckHeight=this.neckWidth=0;this.rotate=!1;this.valueRepresents="height";this.pullDistance=30;this.labelPosition="center";this.labelText="[[title]]: [[value]]";this.balloonText="[[title]]: [[value]]\n[[description]]";b.applyTheme(this,a,this.cname)},drawChart:function(){b.AmFunnelChart.base.drawChart.call(this);var aa=this.chartData;if(b.ifArray(aa)){if(0<this.realWidth&&0<this.realHeight){var ai=Math.round(this.depth3D*Math.cos(this.angle*Math.PI/180)),ad=Math.round(-this.depth3D*Math.sin(this.angle*Math.PI/180)),ak=this.container,aj=this.startDuration,ah=this.rotate,ab=this.updateWidth();this.realWidth=ab;var N=this.updateHeight();this.realHeight=N;var ag=b.toCoordinate,Y=ag(this.marginLeft,ab),W=ag(this.marginRight,ab),al=ag(this.marginTop,N)+this.getTitleHeight(),ag=ag(this.marginBottom,N);0<ai&&0>ad&&(this.neckHeight=this.neckWidth=0,ah?ag-=ad/2:al-=ad/2);var W=ab-Y-W,T=b.toCoordinate(this.baseWidth,W),J=b.toCoordinate(this.neckWidth,W),U=N-ag-al,R=b.toCoordinate(this.neckHeight,U),o=al+U-R;ah&&(al=N-ag,o=al-U+R);this.firstSliceY=al;b.VML&&(this.startAlpha=1);for(var j=W/2+Y,P=(U-R)/((T-J)/2),X=1,S=T/2,T=(U-R)*(T+J)/2+J*R,L=al,a=0,R=0;R<aa.length;R++){var af=aa[R],Q;if(!0!==af.hidden&&(this.showZeroSlices||0!==af.percents)){var Z=[],ac=[],ae;if("height"==this.valueRepresents){ae=U*af.percents/100}else{var V=-T*af.percents/100/2,i=S;Q=-1/(2*P);ae=Math.pow(i,2)-4*Q*V;0>ae&&(ae=0);ae=(Math.sqrt(ae)-i)/(2*Q);if(!ah&&al>=o||ah&&al<=o){ae=2*-V/J}else{if(!ah&&al+ae>o||ah&&al-ae<o){Q=ah?Math.round(ae+(al-ae-o)):Math.round(ae-(al+ae-o)),ae=Q/P,ae=Q+2*(-V-(i-ae/2)*Q)/J}}}V=S-ae/P;i=!1;!ah&&al+ae>o||ah&&al-ae<o?(V=J/2,Z.push(j-S,j+S,j+V,j+V,j-V,j-V),ah?(Q=ae+(al-ae-o),al<o&&(Q=0),ac.push(al,al,al-Q,al-ae,al-ae,al-Q,al)):(Q=ae-(al+ae-o),al>o&&(Q=0),ac.push(al,al,al+Q,al+ae,al+ae,al+Q,al)),i=!0):(Z.push(j-S,j+S,j+V,j-V),ah?ac.push(al,al,al-ae,al-ae):ac.push(al,al,al+ae,al+ae));Q=ak.set();0<ai&&0>ad?(ac=V/S,Z=-1,ah||(Z=1),isNaN(X)&&(X=0),Z=(new b.Cuboid(ak,2*S,Z*ae,ai,ad*X,af.color,af.alpha,this.outlineThickness,this.outlineColor,this.outlineAlpha,90,0,!1,0,af.pattern,ac)).set,Z.translate(j-S,al-ad/2*X),X*=ac):Z=b.polygon(ak,Z,ac,af.color,af.alpha,this.outlineThickness,this.outlineColor,this.outlineAlpha);b.setCN(this,Q,"funnel-item");b.setCN(this,Z,"funnel-slice");b.setCN(this,Q,af.className,!0);Q.push(Z);this.graphsSet.push(Q);ah||Q.toBack();af.wedge=Q;af.index=R;if(ac=this.gradientRatio){var s=[],O;for(O=0;O<ac.length;O++){s.push(b.adjustLuminosity(af.color,ac[O]))}0<s.length&&Z.gradient("linearGradient",s);af.pattern&&Z.pattern(af.pattern,NaN,this.path)}0<aj&&(this.chartCreated||Q.setAttr("opacity",this.startAlpha));this.addEventListeners(Q,af);af.ty0=al-ae/2;this.labelsEnabled&&this.labelText&&af.percents>=this.hideLabelsPercent&&(ac=this.formatString(this.labelText,af),(Z=this.labelFunction)&&(ac=Z(af,ac)),s=af.labelColor,s||(s=this.color),Z=this.labelPosition,O="left","center"==Z&&(O="middle"),"left"==Z&&(O="right"),""!==ac&&(ac=b.wrappedText(ak,ac,s,this.fontFamily,this.fontSize,O,!1,this.maxLabelWidth),b.setCN(this,ac,"funnel-label"),b.setCN(this,ac,af.className,!0),ac.node.style.pointerEvents="none",Q.push(ac),s=j,ah?(O=al-ae/2,af.ty0=O):(O=al+ae/2,af.ty0=O,O<L+a+5&&(O=L+a+5),O>N-ag&&(O=N-ag)),"right"==Z&&(s=W+10+Y,af.tx0=j+(S-ae/2/P),i&&(af.tx0=j+V)),"left"==Z&&(af.tx0=j-(S-ae/2/P),i&&(af.tx0=j-V),s=Y),af.label=ac,af.labelX=s,af.labelY=O,af.labelHeight=ac.getBBox().height,ac.translate(s,O),S=ac.getBBox(),L=b.rect(ak,S.width+5,S.height+5,"#ffffff",0.005),L.translate(s+S.x,O+S.y),Q.push(L),af.hitRect=L,a=ac.getBBox().height,L=O));(0===af.alpha||0<aj&&!this.chartCreated)&&Q.hide();al=ah?al-ae:al+ae;S=V;af.startX=b.toCoordinate(this.startX,ab);af.startY=b.toCoordinate(this.startY,N);af.pullX=b.toCoordinate(this.pullDistance,ab);af.pullY=0;af.balloonX=j;af.balloonY=af.ty0}}this.arrangeLabels();this.initialStart();(aa=this.legend)&&aa.invalidateSize()}else{this.cleanChart()}}this.dispDUpd()},arrangeLabels:function(){var v=this.rotate,p;p=v?0:this.realHeight;for(var k=0,t=this.chartData,s=t.length,o,j=0;j<s;j++){o=t[s-j-1];var x=o.label,m=o.labelY,i=o.labelX,h=o.labelHeight,u=m;v?p+k+5>m&&(u=p+k+5):m+h+5>p&&(u=p-5-h);p=u;k=h;x&&(x.translate(i,u),x=x.getBBox(),o.hitRect&&o.hitRect.translate(i+x.x,u+x.y));o.labelY=u;o.tx=i;o.ty=u;o.tx2=i}"center"!=this.labelPosition&&this.drawTicks()}})})();(function(){var b=window.AmCharts;b.Cuboid=b.Class({construct:function(z,s,m,u,t,p,k,B,o,j,i,x,G,A,h,C,v){this.set=z.set();this.container=z;this.h=Math.round(m);this.w=Math.round(s);this.dx=u;this.dy=t;this.colors=p;this.alpha=k;this.bwidth=B;this.bcolor=o;this.balpha=j;this.dashLength=A;this.topRadius=C;this.pattern=h;this.rotate=G;this.bcn=v;G?0>s&&0===i&&(i=180):0>m&&270==i&&(i=90);this.gradientRotation=i;0===u&&0===t&&(this.cornerRadius=x);this.draw()},draw:function(){var am=this.set;am.clear();var av=this.container,ap=av.chart,ax=this.w,aw=this.h,au=this.dx,an=this.dy,ag=this.colors,at=this.alpha,al=this.bwidth,ak=this.bcolor,ay=this.balpha,Y=this.gradientRotation,U=this.cornerRadius,Z=this.dashLength,X=this.pattern,ae=this.topRadius,ad=this.bcn,W=ag,ab=ag;"object"==typeof ag&&(W=ag[0],ab=ag[ag.length-1]);var aj,V,s,ar,ai,ac,ao,aq,aa,S=at;X&&(at=0);var af,ah,T,R,o=this.rotate;if(0<Math.abs(au)||0<Math.abs(an)){if(isNaN(ae)){ao=ab,ab=b.adjustLuminosity(W,-0.2),ab=b.adjustLuminosity(W,-0.2),aj=b.polygon(av,[0,au,ax+au,ax,0],[0,an,an,0,0],ab,at,1,ak,0,Y),0<ay&&(aa=b.line(av,[0,au,ax+au],[0,an,an],ak,ay,al,Z)),V=b.polygon(av,[0,0,ax,ax,0],[0,aw,aw,0,0],ab,at,1,ak,0,Y),V.translate(au,an),0<ay&&(s=b.line(av,[au,au],[an,an+aw],ak,ay,al,Z)),ar=b.polygon(av,[0,0,au,au,0],[0,aw,aw+an,an,0],ab,at,1,ak,0,Y),ai=b.polygon(av,[ax,ax,ax+au,ax+au,ax],[0,aw,aw+an,an,0],ab,at,1,ak,0,Y),0<ay&&(ac=b.line(av,[ax,ax+au,ax+au,ax],[0,an,aw+an,aw],ak,ay,al,Z)),ab=b.adjustLuminosity(ao,0.2),ao=b.polygon(av,[0,au,ax+au,ax,0],[aw,aw+an,aw+an,aw,aw],ab,at,1,ak,0,Y),0<ay&&(aq=b.line(av,[0,au,ax+au],[aw,aw+an,aw+an],ak,ay,al,Z))}else{var j,i,a;o?(j=aw/2,ab=au/2,a=aw/2,i=ax+au/2,ah=Math.abs(aw/2),af=Math.abs(au/2)):(ab=ax/2,j=an/2,i=ax/2,a=aw+an/2+1,af=Math.abs(ax/2),ah=Math.abs(an/2));T=af*ae;R=ah*ae;0.1<af&&0.1<af&&(aj=b.circle(av,af,W,at,al,ak,ay,!1,ah),aj.translate(ab,j));0.1<T&&0.1<T&&(ao=b.circle(av,T,b.adjustLuminosity(W,0.5),at,al,ak,ay,!1,R),ao.translate(i,a))}}at=S;1>Math.abs(aw)&&(aw=0);1>Math.abs(ax)&&(ax=0);!isNaN(ae)&&(0<Math.abs(au)||0<Math.abs(an))?(ag=[W],ag={fill:ag,stroke:ak,"stroke-width":al,"stroke-opacity":ay,"fill-opacity":at},o?(at="M0,0 L"+ax+","+(aw/2-aw/2*ae),al=" B",0<ax&&(al=" A"),b.VML?(at+=al+Math.round(ax-T)+","+Math.round(aw/2-R)+","+Math.round(ax+T)+","+Math.round(aw/2+R)+","+ax+",0,"+ax+","+aw,at=at+(" L0,"+aw)+(al+Math.round(-af)+","+Math.round(aw/2-ah)+","+Math.round(af)+","+Math.round(aw/2+ah)+",0,"+aw+",0,0")):(at+="A"+T+","+R+",0,0,0,"+ax+","+(aw-aw/2*(1-ae))+"L0,"+aw,at+="A"+af+","+ah+",0,0,1,0,0"),af=90):(al=ax/2-ax/2*ae,at="M0,0 L"+al+","+aw,b.VML?(at="M0,0 L"+al+","+aw,al=" B",0>aw&&(al=" A"),at+=al+Math.round(ax/2-T)+","+Math.round(aw-R)+","+Math.round(ax/2+T)+","+Math.round(aw+R)+",0,"+aw+","+ax+","+aw,at+=" L"+ax+",0",at+=al+Math.round(ax/2+af)+","+Math.round(ah)+","+Math.round(ax/2-af)+","+Math.round(-ah)+","+ax+",0,0,0"):(at+="A"+T+","+R+",0,0,0,"+(ax-ax/2*(1-ae))+","+aw+"L"+ax+",0",at+="A"+af+","+ah+",0,0,1,0,0"),af=180),av=av.path(at).attr(ag),av.gradient("linearGradient",[W,b.adjustLuminosity(W,-0.3),b.adjustLuminosity(W,-0.3),W],af),o?av.translate(au/2,0):av.translate(0,an/2)):av=0===aw?b.line(av,[0,ax],[0,0],ak,ay,al,Z):0===ax?b.line(av,[0,0],[0,aw],ak,ay,al,Z):0<U?b.rect(av,ax,aw,ag,at,al,ak,ay,U,Y,Z):b.polygon(av,[0,0,ax,ax,0],[0,aw,aw,0,0],ag,at,al,ak,ay,Y,!1,Z);ax=isNaN(ae)?0>aw?[aj,aa,V,s,ar,ai,ac,ao,aq,av]:[ao,aq,V,s,ar,ai,aj,aa,ac,av]:o?0<ax?[aj,av,ao]:[ao,av,aj]:0>aw?[aj,av,ao]:[ao,av,aj];b.setCN(ap,av,ad+"front");b.setCN(ap,V,ad+"back");b.setCN(ap,ao,ad+"top");b.setCN(ap,aj,ad+"bottom");b.setCN(ap,ar,ad+"left");b.setCN(ap,ai,ad+"right");for(aj=0;aj<ax.length;aj++){if(V=ax[aj]){am.push(V),b.setCN(ap,V,ad+"element")}}X&&av.pattern(X,NaN,ap.path)},width:function(c){isNaN(c)&&(c=0);this.w=Math.round(c);this.draw()},height:function(c){isNaN(c)&&(c=0);this.h=Math.round(c);this.draw()},animateHeight:function(d,c){var a=this;a.easing=c;a.totalFrames=Math.round(1000*d/b.updateRate);a.rh=a.h;a.frame=0;a.height(1);setTimeout(function(){a.updateHeight.call(a)},b.updateRate)},updateHeight:function(){var c=this;c.frame++;var a=c.totalFrames;c.frame<=a&&(a=c.easing(0,c.frame,1,c.rh-1,a),c.height(a),setTimeout(function(){c.updateHeight.call(c)},b.updateRate))},animateWidth:function(d,c){var a=this;a.easing=c;a.totalFrames=Math.round(1000*d/b.updateRate);a.rw=a.w;a.frame=0;a.width(1);setTimeout(function(){a.updateWidth.call(a)},b.updateRate)},updateWidth:function(){var c=this;c.frame++;var a=c.totalFrames;c.frame<=a&&(a=c.easing(0,c.frame,1,c.rw-1,a),c.width(a),setTimeout(function(){c.updateWidth.call(c)},b.updateRate))}})})();