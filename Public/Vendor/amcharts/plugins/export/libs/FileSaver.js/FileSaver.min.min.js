/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var saveAs=saveAs||(function(D){if(typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var s=D.document,y=function(){return D.URL||D.webkitURL||D},w=s.createElementNS("http://www.w3.org/1999/xhtml","a"),F="download" in w,A=function(a){var b=s.createEvent("MouseEvents");b.initMouseEvent("click",true,false,D,0,0,0,0,0,false,false,false,false,0,null);a.dispatchEvent(b)},v=D.webkitRequestFileSystem,u=D.requestFileSystem||v||D.mozRequestFileSystem,x=function(a){(D.setImmediate||D.setTimeout)(function(){throw a},0)},I="application/octet-stream",z=0,C=500,B=function(a){var b=function(){if(typeof a==="string"){y().revokeObjectURL(a)}else{a.remove()}};if(D.chrome){b()}else{setTimeout(b,C)}},t=function(e,f,b){f=[].concat(f);var c=f.length;while(c--){var a=e["on"+f[c]];if(typeof a==="function"){try{a.call(e,b||e)}catch(d){x(d)}}}},E=function(a){if(/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)){return new Blob(["\ufeff",a],{type:a.type})}return a},G=function(l,k){l=E(l);var j=this,d=l.type,a=false,h,i,e=function(){t(j,"writestart progress write writeend".split(" "))},b=function(){if(a||!h){h=y().createObjectURL(l)}if(i){i.location.href=h}else{var m=D.open(h,"_blank");if(m==undefined&&typeof safari!=="undefined"){D.location.href=h}}j.readyState=j.DONE;e();B(h)},f=function(m){return function(){if(j.readyState!==j.DONE){return m.apply(this,arguments)}}},g={create:true,exclusive:false},c;j.readyState=j.INIT;if(!k){k="download"}if(F){h=y().createObjectURL(l);w.href=h;w.download=k;A(w);j.readyState=j.DONE;e();B(h);return}if(D.chrome&&d&&d!==I){c=l.slice||l.webkitSlice;l=c.call(l,0,l.size,I);a=true}if(v&&k!=="download"){k+=".download"}if(d===I||v){i=D}if(!u){b();return}z+=l.size;u(D.TEMPORARY,z,f(function(m){m.root.getDirectory("saved",g,f(function(o){var n=function(){o.getFile(k,g,f(function(p){p.createWriter(f(function(q){q.onwriteend=function(r){i.location.href=p.toURL();j.readyState=j.DONE;t(j,"writeend",r);B(p)};q.onerror=function(){var r=q.error;if(r.code!==r.ABORT_ERR){b()}};"writestart progress write abort".split(" ").forEach(function(r){q["on"+r]=j["on"+r]});q.write(l);j.abort=function(){q.abort();j.readyState=j.DONE};j.readyState=j.WRITING}),b)}),b)};o.getFile(k,{create:false},f(function(p){p.remove();n()}),f(function(p){if(p.code===p.NOT_FOUND_ERR){n()}else{b()}}))}),b)}),b)},H=G.prototype,J=function(b,a){return new G(b,a)};if(typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob){return function(b,a){return navigator.msSaveOrOpenBlob(E(b),a)}}H.abort=function(){var a=this;a.readyState=a.DONE;t(a,"abort")};H.readyState=H.INIT=0;H.WRITING=1;H.DONE=2;H.error=H.onwritestart=H.onprogress=H.onwrite=H.onabort=H.onerror=H.onwriteend=null;return J}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content));if(typeof module!=="undefined"&&module.exports){module.exports.saveAs=saveAs}else{if((typeof define!=="undefined"&&define!==null)&&(define.amd!=null)){define([],function(){return saveAs})}};