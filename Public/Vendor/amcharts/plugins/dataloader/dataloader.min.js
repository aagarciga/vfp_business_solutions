AmCharts.translations.dataLoader={};AmCharts.addInitHandler(function(j){if(undefined===j.dataLoader||!o(j.dataLoader)){j.dataLoader={}}var i=j.version.split(".");if((Number(i[0])<3)||(3===Number(i[0])&&(Number(i[1])<13))){return}var c=j.dataLoader;c.remaining=0;var d={async:true,format:"json",showErrors:true,showCurtain:true,noStyles:false,reload:0,timestamp:false,delimiter:",",skip:0,useColumnNames:false,reverse:false,reloading:false,complete:false,error:false,chart:j};c.loadData=function(){if("stock"===j.type){setTimeout(function(){if(0>j.panelsSettings.startDuration){c.startDuration=j.panelsSettings.startDuration;j.panelsSettings.startDuration=0}for(var l=0;l<j.dataSets.length;l++){var p=j.dataSets[l];if(undefined!==p.dataLoader&&undefined!==p.dataLoader.url){p.dataProvider=[];h(p.dataLoader);e(p.dataLoader.url,p,p.dataLoader,"dataProvider")}if(undefined!==p.eventDataLoader&&undefined!==p.eventDataLoader.url){p.events=[];h(p.eventDataLoader);e(p.eventDataLoader.url,p,p.eventDataLoader,"stockEvents")}}},100)}else{h(c);if(undefined===c.url){return}if(undefined!==j.startDuration&&(0<j.startDuration)){c.startDuration=j.startDuration;j.startDuration=0}if("gauge"===j.type){if(undefined===j.arrows){j.arrows=[]}e(c.url,j,c,"arrows")}else{if(undefined===j.dataProvider){j.dataProvider=j.type==="map"?{}:[]}e(c.url,j,c,"dataProvider")}}};c.loadData();function e(p,r,l,q){if(undefined===q){q="dataProvider"}if(l.showCurtain){a(undefined,l.noStyles)}c.remaining++;AmCharts.loadFile(p,l,function(t){if(false===t){g(l.error,l,j);n(AmCharts.__("Error loading the file",j.language)+": "+p,false,l)}else{if(undefined===l.format){l.format="json"}l.format=l.format.toLowerCase();switch(l.format){case"json":r[q]=AmCharts.parseJSON(t);if(false===r[q]){g(l.error,l,j);n(AmCharts.__("Error parsing JSON file",j.language)+": "+c.url,false,l);r[q]=[];return}else{r[q]=f(r[q],l);g(l.load,l,j)}break;case"csv":r[q]=AmCharts.parseCSV(t,l);if(false===r[q]){g(l.error,l,j);n(AmCharts.__("Error parsing CSV file",j.language)+": "+c.url,false,l);r[q]=[];return}else{r[q]=f(r[q],l);g(l.load,l,j)}break;default:g(l.error,l,j);n(AmCharts.__("Unsupported data format",j.language)+": "+l.format,false,l.noStyles);return}c.remaining--;if(0===c.remaining){g(l.complete,j);if(l.async){if("map"===j.type){j.validateNow(true)}else{j.validateData();if(c.startDuration){if("stock"===j.type){j.panelsSettings.startDuration=c.startDuration;for(var s=0;s<j.panels.length;s++){j.panels[s].startDuration=c.startDuration;j.panels[s].animateAgain()}}else{j.startDuration=c.startDuration;if(j.animateAgain!==undefined){j.animateAgain()}}}}}if("stock"===j.type&&!l.reloading&&undefined!==j.periodSelector){j.periodSelector.setDefaultPeriod()}m()}if(l.reload){if(l.timeout){clearTimeout(l.timeout)}l.timeout=setTimeout(e,1000*l.reload,p,r,l);l.reloading=true}}})}function f(p,l){if(undefined!==l.postProcess&&b(l.postProcess)){try{return l.postProcess.call(c,p,l,j)}catch(q){n(AmCharts.__("Error loading file",j.language)+": "+l.url,false,l);return p}}else{return p}}function o(l){return"object"===typeof(l)}function b(l){return"function"===typeof(l)}function h(p){for(var l in d){if(d.hasOwnProperty(l)){k(p,l,d[l])}}}function k(q,l,p){if(undefined===q[l]){q[l]=p}}function n(q,p,l){if(l.showErrors){a(q,l.noStyles)}else{m();console.log(q)}}function a(r,l){m();if(undefined===r){r=AmCharts.__("Loading data...",j.language)}var p=document.createElement("div");p.setAttribute("id",j.div.id+"-curtain");p.className="amcharts-dataloader-curtain";if(true!==l){p.style.position="absolute";p.style.top=0;p.style.left=0;p.style.width=(undefined!==j.realWidth?j.realWidth:j.divRealWidth)+"px";p.style.height=(undefined!==j.realHeight?j.realHeight:j.divRealHeight)+"px";p.style.textAlign="center";p.style.display="table";p.style.fontSize="20px";try{p.style.background="rgba(255, 255, 255, 0.3)"}catch(q){p.style.background="rgb(255, 255, 255)"}p.innerHTML='<div style="display: table-cell; vertical-align: middle;">'+r+"</div>"}else{p.innerHTML=r}j.containerDiv.appendChild(p);c.curtain=p}function m(){try{if(undefined!==c.curtain){j.containerDiv.removeChild(c.curtain)}}catch(l){}c.curtain=undefined}function g(l,r,q,p){if("function"===typeof l){l.call(c,r,q,p)}}},["pie","serial","xy","funnel","radar","gauge","gantt","stock","map"]);if(undefined===AmCharts.__){AmCharts.__=function(a,b){if(undefined!==b&&undefined!==AmCharts.translations.dataLoader[b]&&undefined!==AmCharts.translations.dataLoader[b][a]){return AmCharts.translations.dataLoader[b][a]}else{return a}}}AmCharts.loadFile=function(b,a,c){var d;if(window.XMLHttpRequest){d=new XMLHttpRequest()}else{d=new ActiveXObject("Microsoft.XMLHTTP")}d.onreadystatechange=function(){if(4===d.readyState&&404===d.status){c.call(this,false)}else{if(4===d.readyState&&200===d.status){c.call(this,d.responseText)}}};try{d.open("GET",a.timestamp?AmCharts.timestampUrl(b):b,a.async);d.send()}catch(f){c.call(this,false)}};AmCharts.parseJSON=function(response){try{if(undefined!==JSON){return JSON.parse(response)}else{return eval(response)}}catch(e){return false}};AmCharts.parseCSV=function(c,k){var d=AmCharts.CSVToArray(c,k.delimiter);var f=[];var g=[];var b,e;if(k.useColumnNames){g=d.shift();for(var h=0;h<g.length;h++){b=g[h].replace(/^\s+|\s+$/gm,"");if(""===b){b="col"+h}g[h]=b}if(0<k.skip){k.skip--}}for(e=0;e<k.skip;e++){d.shift()}var j;while((j=k.reverse?d.pop():d.shift())){var a={};for(e=0;e<j.length;e++){b=undefined===g[e]?"col"+e:g[e];a[b]=j[e]}f.push(a)}return f};AmCharts.CSVToArray=function(e,g){g=(g||",");var f=new RegExp(("(\\"+g+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+g+"\\r\\n]*))"),"gi");var b=[[]];var d=null;while((d=f.exec(e))){var a=d[1];if(a.length&&(a!==g)){b.push([])}var c;if(d[2]){c=d[2].replace(new RegExp('""',"g"),'"')}else{c=d[3]}b[b.length-1].push(c)}return(b)};AmCharts.timestampUrl=function(a){var b=a.split("?");if(1===b.length){b[1]=new Date().getTime()}else{b[1]+="&"+new Date().getTime()}return b.join("?")};