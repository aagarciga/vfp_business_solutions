(function(){var e,c,f,a,b,d;d=window;e=d.jQuery;c=d.App;b=d.dandelion;a=b.namespace("App.OnPurchaseOrderDashboard",d);f=c.OnPurchaseOrderDashboard.DynamicFilter;a.status={};a.status.itemsPerPage=50;a.status.table_header_sortLastButton=null;a.status.table_header_sortField="pono";a.status.table_header_sortFieldOrder="ASC";a.status.currentPage=1;a.status.currentItemNo="";a.status.currentSet="details";a.status.currentBalance="0.0";a.dictionaries={};a.htmlBindings={};a.htmlBindings.container=".container";a.htmlBindings.itemCounter="#panelHeadingItemsCount";a.htmlBindings.drpItemPerPage=".top-pager-itemmperpage-control a";a.htmlBindings.drpItemPerPageValue=".top-pager-itemmperpage-control button span.value";a.htmlBindings.filterForm="#filterForm";a.htmlBindings.table="#OnPurchaseOrderDashboardTable";a.htmlBindings.table_header_btnSort=".btn-table-sort";a.htmlBindings.table_body_btnCommitted=".btn-committed-form-link";a.htmlBindings.table_body_btnOnorder=".btn-onorder-form-link";a.htmlBindings.pager_container=".pager-wrapper";a.htmlBindings.pager_btnPagerPages=".pager-btn";a.functions={};a.functions.paginate=function(){e.ajax({data:{itemno:a.status.currentItemNo,itemwhs:a.status.currentItemWhs,predicate:a.DynamicFilter.functions.getPredicate(),page:a.status.currentPage,itemsPerPage:a.status.itemsPerPage,orderby:a.status.table_header_sortField,order:a.status.table_header_sortFieldOrder},url:a.urls.getPage,type:"post",beforeSend:function(){return e(".loading").show()},success:function(j,m,k){var l,g,i,h;l=e.parseJSON(j);g=new BootstrapPager(l,a.eventHandlers.pager_btnPagerPages_onClick);h=g.getCurrentPagedItems();i=g.getPagerControl();e(a.htmlBindings.pager_container).empty().append(i);a.functions.updateTable(h);e(a.htmlBindings.itemCounter).html(g.itemsCount);return e(".loading").hide()}});return this};a.functions.updateTable=function(g){var i,j,h;i=e(a.htmlBindings.table);j=i.children("tbody");j.empty();for(h in g){if(g.hasOwnProperty(h)){j.append(a.functions.buildTableItem(g[h],"","item-field"))}}a.functions.bindTableItemsEventHandlers();return this};a.functions.buildTableItem=function(q,v,s){var u,w,r,t,o,n,k,p,l,h,g,j,i,m;u=d.document;w=u.createElement("tr");t=function(y,x){var z;z=u.createElement("td");z.className=x;z.appendChild(u.createTextNode(y));return z};i=function(B,z,x,A){var y,C;if(A==null){A="#"}C=u.createElement("td");y=u.createElement("a");y.href=A;y.className=z;y.dataset.custno=q.custno;if(typeof B==="string"){y.appendChild(u.createTextNode(B))}else{y.appendChild(B)}C.className=x||s;C.appendChild(y);return C};r=function(D,z){var y,C,A,B,x;x=u.createElement("select");B=u.createElement("option");B.appendChild(u.createTextNode("Empty"));x.appendChild(B);for(A in z){if(z.hasOwnProperty(A)){y=z[A].id;C=z[A].descrip;B=u.createElement("option");if(D===y){B.selected="selected"}B.value=y;B.appendChild(u.createTextNode(C));x.appendChild(B)}}x.className="form-control update-dropdown";return x};m=function(z,B,y){var x,A;A=u.createElement("td");x=r(z,B);x.dataset.ordnum=q.ordnum;x.className+=" select2-nosearch "+y;A.appendChild(x);return A};n=function(){return t(q.pono)};j=function(){return t(q.vendno)};o=function(){return t(q.podate)};l=function(){return t(q.qtyord,"number")};h=function(){return t(q.qtyrec,"number")};p=function(){return t(q.qtyleft,"number")};g=function(){return t(q.shipped)};k=function(){return t(q.potype)};w.className=v;w.appendChild(n());w.appendChild(j());w.appendChild(o());w.appendChild(l());w.appendChild(h());w.appendChild(p());w.appendChild(g());w.appendChild(k());return w};a.functions.bindTableItemsEventHandlers=function(){return this};a.functions.bindEventHandlers=function(){e(a.htmlBindings.drpItemPerPage).on("click",a.eventHandlers.drpItemPerPage_onClick);e(a.htmlBindings.table_header_btnSort).on("click",a.eventHandlers.table_body_btnSort_onClick);e(a.htmlBindings.pager_btnPagerPages).on("click",a.eventHandlers.pager_btnPagerPages_onClick);a.functions.bindTableItemsEventHandlers();return this};a.eventHandlers={};a.eventHandlers.drpItemPerPage_onClick=function(h){var g,i;g=e(h.target);i=g.html();a.status.itemsPerPage=i;e(a.htmlBindings.drpItemPerPageValue).text(i);a.status.currentPage=1;a.functions.paginate();return this};a.eventHandlers.pager_btnPagerPages_onClick=function(h){var g,i;g=e(h.target);i=g.data("page");a.status.currentPage=i;a.functions.paginate();return this};a.eventHandlers.table_body_btnSort_onClick=function(h){var g,i;g=e(h.target);i=g.data("field");if(a.status.table_header_sortLastButton!==null){a.status.table_header_sortLastButton.removeClass("asc desc")}if(a.status.table_header_sortField!==i){a.status.table_header_sortFieldOrder=""}a.status.table_header_sortField=i;if(a.status.table_header_sortFieldOrder==="ASC"){a.status.table_header_sortFieldOrder="DESC";g.addClass("asc").removeClass("desc")}else{a.status.table_header_sortFieldOrder="ASC";g.addClass("desc").removeClass("asc")}a.status.table_header_sortLastButton=g;a.functions.paginate();return this};a.init=function(i,g,h){a.status.currentItemNo=i;a.status.currentItemWhs=g;a.status.itemsPerPage=e(a.htmlBindings.drpItemPerPageValue).text();f.init(h);a.functions.bindEventHandlers();return this}}).call(this);