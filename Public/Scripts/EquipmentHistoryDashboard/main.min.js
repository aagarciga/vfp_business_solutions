(function(d,f,c,g,e){var a=d.dandelion,b=a.namespace("App",d);b.EquipmentHistoryDashboard=(function(){var l,q,n,o,h,m,j;l={};q={itemsPerPage:0,currentPage:0};o={};h={dropdown:".dropdown",itemsPerPageSelector:".items-per-page-selector",statusSelector:".status-selector",btnActionFilesDialog:".btn-action-files-dialog",btnActionAdd:".btn-action-add",btnActionEdit:".btn-action-edit",btnActionView:".btn-action-view",dateRangePickerSingle:".daterangepicker-single",modalEquipmentHistoryFormEdit:"#modal-equipment-history-form-edit"};j={modalEquipmentHistoryFormAdd:(function(w,z,y){var t,D,A,B,u,v,x;t={modalViewElement:"#modal-equipment-history-form-add",controlWorkOrder:".control-work-order",controlProjectManager:".control-project-manager",controlDateOut:".control-installdte",controlExpactedIn:".control-expdtein",controlReceived:".control-daterec"};D={usePlugins:function(){z(t.controlWorkOrder).select2({theme:"bootstrap",ajax:{url:l.workOrderSelectorAjaxUrl,dataType:"json",delay:250,processResults:function(G,H){H.page=H.page||1;return{results:G.items,pagination:{more:(H.page*30)<G.totalCount}}},cache:true},placeholder:"Select One ...",allowClear:true});z(t.controlProjectManager).select2({theme:"bootstrap",ajax:{url:l.projectManagerSelectorAjaxUrl,dataType:"json",delay:250,processResults:function(G,H){H.page=H.page||1;return{results:G.items,pagination:{more:(H.page*30)<G.totalCount}}},cache:true},placeholder:"Select One ...",allowClear:true})},reset:function(){w.console.log("reseting...");x.reset();z(t.controlWorkOrder).val(null).trigger("change");z(t.controlProjectManager).val(null).trigger("change");z(t.controlDateOut).val("");z(t.controlExpactedIn).val("");z(t.controlReceived).val("")}};A={saveHistory_OnDone:function(G){D.reset();C()}};B=function(){this.ordnum="";this.inspectno="";this.installdte="";this.expdtein="";this.daterec=""};u=function(H){var G=this;G.ordnum=y.observable(H.ordnum);G.inspectno=y.observable(H.inspectno);G.installdte=y.observable(H.installdte);G.expdtein=y.observable(H.expdtein);G.daterec=y.observable(H.daterec);G.saveHistory=function(){z.post(l.addEquipmentHistoryUrl,{ordnum:G.ordnum(),inspectno:G.inspectno(),installdte:G.installdte(),expdtein:G.expdtein(),daterec:G.daterec()}).done(A.saveHistory_OnDone).fail(function I(J){throw"POST Fail with :"+J})};G.reset=function(){G.ordnum=y.observable("");G.inspectno=y.observable("");G.installdte=y.observable("");G.expdtein=y.observable("");G.daterec=y.observable("")}};function F(){var G;G=w.document.getElementById(t.koViewElement);v=new B();x=new u(v);y.applyBindings(x,G);D.usePlugins()}function E(){z(t.modalViewElement).modal("show")}function C(){z(t.modalViewElement).modal("hide")}return{init:F,show:E,hide:C}}(d,f,g))};m={dropdown_OnClick:function(u){var t,v;t=f(this);v=t.html();t.parents(h.dropdown).find(".value").text(v)},itemsPerPageSelector_OnClick:function(t){q.itemsPerPage=f(this).html();q.currentPage=1;n.paginate()},statusSelector_OnClick:function(u){var t;t=f(this).html();throw"Exception: Not implemented yet. Do something with status: "+t},btnActionFilesDialog_OnClick:function(t){throw"Exception: Not implemented yet"},btnActionAdd_OnClick:function(t){j.modalEquipmentHistoryFormAdd.show()},btnActionEdit_OnClick:function(t){f(h.modalEquipmentHistoryFormEdit).modal("show");throw"Exception: Not implemented yet"},btnActionView_OnClick:function(t){throw"Exception: Not implemented yet"}};n={bindEventHandlers:function(){f(h.dropdown).on("click","a",m.dropdown_OnClick);f(h.itemsPerPageSelector).on("click","a",m.itemsPerPageSelector_OnClick);f(h.statusSelector).on("click","a",m.statusSelector_OnClick);f(h.btnActionFilesDialog).on("click",m.btnActionFilesDialog_OnClick);f(h.btnActionAdd).on("click",m.btnActionAdd_OnClick);f(h.btnActionEdit).on("click",m.btnActionEdit_OnClick);f(h.btnActionView).on("click",m.btnActionView_OnClick)},usePlugins:function(){f(h.dateRangePickerSingle).daterangepicker({singleDatePicker:true,format:"YYYY-MM-DD",startDate:d.moment(),endDate:d.moment()})},paginate:function(){throw"Exception: Not implemented yet"}};function k(t){h.itemsPerPageSelector=t}function p(t){h.statusSelector=t}function r(t,u){o[t]=u}function i(u,t){l[u]=t}function s(u){var t;d.console.log("filter: ",u);d.console.log("HTML Bindings");for(t in h){if(h.hasOwnProperty(t)){d.console.log("\t",t,":",h[t])}}d.console.log("Binding Event Handlers");n.bindEventHandlers();d.console.log("Use Plugins");n.usePlugins();d.console.log("Dictionaries:");d.console.log(o);d.console.log("Initializing MVVM related logic:");for(t in j){if(j.hasOwnProperty(t)){d.console.log("\t",t,":",j[t]);j[t].init()}}}return{init:s,setItemsPerPageSelector:k,setStatusSelector:p,addDictionary:r,addUrl:i}}())}(window,window.jQuery,window.kb,window.ko,window.Backbone));