(function(d,f,c,g,e){var a=d.dandelion,b=a.namespace("App",d);b.EquipmentHistoryDashboard=(function(){var r,l,n,q,v,i,m,o;o=b.EquipmentHistoryDashboard.ProjectFiles;r={};l={itemsPerPage:0,currentPage:0,sortField:"equipid",sortFieldOrder:"ASC",sortLastButton:null,currentID:null};q={};v={dashboardContainer:".dashboard-container",dropdown:".dropdown",itemsPerPageSelector:".items-per-page-selector",statusSelector:".field-status",btnActionFilesDialog:".btn-action-files-dialog",btnActionAdd:".btn-action-add",btnActionEdit:".btn-action-edit",btnActionView:".btn-action-view",dateRangePickerSingle:".daterangepicker-single",tableMain:"#equipmentHistoryDashboardTable",sortButtons:".btn-table-sort",pagerContainer:".pager-wrapper",pagerButton:".pager-btn",tableMainFieldWorkOrder:".field-work-order",tableMainFieldEquipId:".field-id",tableMainFieldWorkOrderLink:".field-work-order-link",tableMainFieldStatus:".field-status"};m={modalEquipmentHistoryFormAdd:(function(z,C,G,B,J){var x,H,D,E,w,y,A;x={modalViewElement:"#modal-equipment-history-form-add",controlWorkOrder:".control-work-order",controlProjectManager:".control-project-manager",controlDateOut:".control-installdte",controlExpactedIn:".control-expdtein",controlReceived:".control-daterec"};H={usePlugins:function(){C(x.controlWorkOrder).select2({theme:"bootstrap",ajax:{url:r.workOrderSelectorAjaxUrl,dataType:"json",delay:250,processResults:function(M,N){N.page=N.page||1;return{results:M.items,pagination:{more:(N.page*30)<M.totalCount}}},cache:true}});C(x.controlProjectManager).select2({theme:"bootstrap",ajax:{url:r.projectManagerSelectorAjaxUrl,dataType:"json",delay:250,processResults:function(M,N){N.page=N.page||1;return{results:M.items,pagination:{more:(N.page*30)<M.totalCount}}},cache:true}})},reset:function(){A.reset();C(x.controlWorkOrder).val(null).trigger("change");C(x.controlProjectManager).val(null).trigger("change");C(x.controlDateOut).val("");C(x.controlExpactedIn).val("");C(x.controlReceived).val("")},saveHistoryCallback:function(){throw"Exception: Not implemented yet. Must be set by SetUpdateHistoryCallback function."}};D={saveHistory_OnDone:function(M){console.log("On Add:",M);var N=C.parseJSON(M);H.saveHistoryCallback(N.equipid,N.ordnum,N.status,N.qbtxlineid);F()}};E=J.Model.extend({defaults:{equipid:"",ordnum:"",inspectno:"",installdte:"",expdtein:"",daterec:""}});w=function(N){var M=this;M.equipid=G.observable(N,"equipid");M.ordnum=G.observable(N,"ordnum");M.inspectno=G.observable(N,"inspectno");M.installdte=G.observable(N,"installdte");M.expdtein=G.observable(N,"expdtein");M.daterec=G.observable(N,"daterec");M.saveHistory=function(O){M.installdte(C(x.controlDateOut).val());M.expdtein(C(x.controlExpactedIn).val());M.daterec(C(x.controlReceived).val());C.post(r.addEquipmentHistoryUrl,{equipid:O.equipid(),ordnum:O.ordnum(),inspectno:O.inspectno(),installdte:O.installdte(),expdtein:O.expdtein(),daterec:O.daterec()}).done(D.saveHistory_OnDone).fail(function P(Q){throw"POST Fail with :"+Q})};M.reset=function(){M.equipid("");M.ordnum("");M.inspectno("");M.installdte("");M.expdtein("");M.daterec("")}};function K(){var M;M=z.document.getElementById((x.modalViewElement).slice(1));y=new E({});A=new w(y);B.applyBindings(A,M);H.usePlugins()}function I(M){H.reset();A.equipid(M);C(x.modalViewElement).modal("show")}function F(){C(x.modalViewElement).modal("hide")}function L(M){H.saveHistoryCallback=M}return{init:K,showFor:I,hide:F,setSaveHistoryCallback:L}}(d,f,c,g,e)),modalEquipmentHistoryFormEdit:(function(z,D,H,B,K){var x,I,E,F,w,y,A;x={modalViewElement:"#modal-equipment-history-form-edit",controlProjectManager:".control-project-manager-edit",controlDateOut:".control-installdte-edit",controlExpactedIn:".control-expdtein-edit",controlReceived:".control-daterec-edit",alertDelete:".alert-delete"};I={usePlugins:function(){},reset:function(){A.reset();D(x.controlProjectManager).val(null).trigger("change");D(x.controlDateOut).val("");D(x.controlExpactedIn).val("");D(x.controlReceived).val("")},updateHistoryCallback:function(){throw"Exception: Not implemented yet. Must be set by SetUpdateHistoryCallback function."},deleteHistoryCallback:function(){throw"Exception: Not implemented yet. Must be set by SetDeleteHistoryCallback function."}};E={updateHistory_OnDone:function(N){console.log("On Update:",N);var O=D.parseJSON(N);if(O.success){I.updateHistoryCallback(O.equipid,O.ordnum,O.status,O.qbtxlineid)}G()},deleteHistory_OnDone:function(N){console.log("On Delete:",N);var O=D.parseJSON(N);if(O.success){I.deleteHistoryCallback(O.equipid,O.ordnum,O.status,O.qbtxlineid)}G()},getEquipmentHistory_OnDone:function(N){var O;O=D.parseJSON(N);if(O.success){A.equipid(O.equipmentHistoryObject.equipid);A.qbtxlineid(O.equipmentHistoryObject.qbtxlineid);A.inspectno(O.equipmentHistoryObject.inspectno);A.installdte(O.equipmentHistoryObject.installdte);A.expdtein(O.equipmentHistoryObject.expdtein);A.daterec(O.equipmentHistoryObject.daterec);D(x.controlProjectManager).append('<option value="'+O.equipmentHistoryObject.inspectno+'">'+O.equipmentHistoryObject.inspectnoName+"</option>");D(x.controlProjectManager).select2({theme:"bootstrap",ajax:{url:r.projectManagerSelectorAjaxUrl,dataType:"json",delay:250,processResults:function(P,Q){Q.page=Q.page||1;return{results:P.items,pagination:{more:(Q.page*30)<P.totalCount}}},cache:true}}).val(O.equipmentHistoryObject.inspectno).trigger("change")}}};F=K.Model.extend({defaults:{qbtxlineid:"",equipid:"",inspectno:"",installdte:"",expdtein:"",daterec:""}});w=function(O){var N=this;N.qbtxlineid=H.observable(O,"qbtxlineid");N.equipid=H.observable(O,"equipid");N.inspectno=H.observable(O,"inspectno");N.installdte=H.observable(O,"installdte");N.expdtein=H.observable(O,"expdtein");N.daterec=H.observable(O,"daterec");N.updateHistory=function(){var P,Q,S,R;P=D(x.controlProjectManager).val();Q=D(x.controlDateOut).val();S=D(x.controlExpactedIn).val();R=D(x.controlReceived).val();D.post(r.updateEquipmentHistoryUrl,{qbtxlineid:N.qbtxlineid(),equipid:N.equipid(),inspectno:P,installdte:Q,expdtein:S,daterec:R}).done(E.updateHistory_OnDone).fail(function T(U){throw"POST Fail with :"+U})};N.deleteHistory=function(P){D.post(r.deleteEquipmentHistoryUrl,{qbtxlineid:P.qbtxlineid(),equipid:P.equipid()}).done(E.deleteHistory_OnDone).fail(function Q(R){throw"POST Fail with :"+R})};N.reset=function(){N.equipid("");N.inspectno("");N.installdte("");N.expdtein("");N.daterec("")}};function M(){var N;N=z.document.getElementById((x.modalViewElement).slice(1));y=new F({});A=new w(y);B.applyBindings(A,N);I.usePlugins()}function J(N){I.reset();D(x.alertDelete).hide();D.post(r.getEquipmentHistoryUrl,{qbtxlineid:N}).done(E.getEquipmentHistory_OnDone).fail(function O(P){throw"POST Fail with :"+P});D(x.modalViewElement).modal("show")}function G(){D(x.modalViewElement).modal("hide")}function C(N){I.updateHistoryCallback=N}function L(N){I.deleteHistoryCallback=N}return{init:M,showFor:J,hide:G,setUpdateHistoryCallback:C,setDeleteHistoryCallback:L}}(d,f,c,g,e)),screenWorkOrderDetails:(function(x,A,E,z,I){var w,F,B,y,K,C,H;w={screenViewElement:"#kb-view-salesorder",modalSaveNotes:"#salesOrderForm_modal_saveNotes",salesOrderForm_btnClose:"#salesOrderForm_btnClose"};F={reset:function(){H.reset()}};B={salesOrderForm_btnClose_onClick:function(L){A(w.screenViewElement).hide()},getWorkOrder_OnDone:function(L){var N,M;N=A.parseJSON(L);M=N.formType;if(N.success){H.modelType(M);H.ordnum(N.salesOrderObject.ordnum);H.date(N.salesOrderObject.date);H.custno(N.salesOrderObject.custno);H.projectLocation(N.salesOrderObject.projectLocation);H.notes(N.salesOrderObject.notes);H.companyName(N.salesOrderObject.companyName);H.address(N.salesOrderObject.address);H.city(N.salesOrderObject.city);H.state(N.salesOrderObject.state);H.zip(N.salesOrderObject.zip);H.phone(N.salesOrderObject.phone);H.subtotal(N.salesOrderObject.subtotal);H.discount(N.salesOrderObject.discount);H.tax(N.salesOrderObject.tax);H.shipping(N.salesOrderObject.shipping);H.total(N.salesOrderObject.total);if(M==="B"||M==="C"){H.ponum(N.salesOrderObject.ponum);H.company(N.salesOrderObject.company);H.destino(N.salesOrderObject.destino);H.prostartdt(N.salesOrderObject.prostartdt);H.proenddt(N.salesOrderObject.proenddt);H.sotypecode(N.salesOrderObject.sotypecode);H.mtrlstatus(N.salesOrderObject.mtrlstatus);H.jobstatus(N.salesOrderObject.jobstatus);H.technam1(N.salesOrderObject.technam1);H.technam2(N.salesOrderObject.technam2);H.qutno(N.salesOrderObject.qutno);H.cstctid(N.salesOrderObject.cstctid);H.jobdescrip(N.salesOrderObject.jobdescrip)}H.items(N.salesOrderObject.itemsCollection)}}};y=I.Model.extend({defaults:{ordnum:"",date:"",custno:"",projectLocation:"",notes:"",companyName:"",address:"",city:"",state:"",zip:"",phone:"",subtotal:"",discount:"",tax:"",shipping:"",total:"",items:new I.Collection([]),modelType:"",ponum:"",company:"",destino:"",prostartdt:"",proenddt:"",sotypecode:"",mtrlstatus:"",jobstatus:"",technam1:"",technam2:"",qutno:"",cstctid:"",jobdescrip:"",}});K=function(M){var L=this;L.modelType=E.observable(M,"modelType");L.ordnum=E.observable(M,"ordnum");L.date=E.observable(M,"date");L.custno=E.observable(M,"custno");L.projectLocation=E.observable(M,"projectLocation");L.notes=E.observable(M,"notes");L.companyName=E.observable(M,"companyName");L.address=E.observable(M,"address");L.city=E.observable(M,"city");L.state=E.observable(M,"state");L.zip=E.observable(M,"zip");L.phone=E.observable(M,"phone");L.subtotal=E.observable(M,"subtotal");L.discount=E.observable(M,"discount");L.tax=E.observable(M,"tax");L.shipping=E.observable(M,"shipping");L.total=E.observable(M,"total");L.ponum=E.observable(M,"ponum");L.company=E.observable(M,"company");L.destino=E.observable(M,"destino");L.prostartdt=E.observable(M,"prostartdt");L.proenddt=E.observable(M,"proenddt");L.sotypecode=E.observable(M,"sotypecode");L.mtrlstatus=E.observable(M,"mtrlstatus");L.jobstatus=E.observable(M,"jobstatus");L.technam1=E.observable(M,"technam1");L.technam2=E.observable(M,"technam2");L.qutno=E.observable(M,"qutno");L.cstctid=E.observable(M,"cstctid");L.jobdescrip=E.observable(M,"jobdescrip");L.items=E.collectionObservable(M.items);L.showTable=z.computed(function(){return L.items().length>0});L.showControlIFBOrC=z.computed(function(){return L.modelType()==="B"||L.modelType()==="C"});L.showControlIfNotC=z.computed(function(){return(L.modelType()!=="C")});L.onShowNotesModal=function(N){A(w.modalSaveNotes).modal("show");return N};L.onSaveNotesModal=function(N){A.post(r.updateWorkOrderNotesUrl,{ordnum:N.ordnum(),notes:N.notes()}).done(function P(){A(w.modalSaveNotes).modal("hide")}).fail(function O(Q){throw Q});return N};L.reset=function(){L.modelType("");L.ordnum("");L.date("");L.custno("");L.projectLocation("");L.notes("");L.companyName("");L.address("");L.city("");L.state("");L.zip("");L.phone("");L.subtotal("");L.discount("");L.tax("");L.shipping("");L.total("");L.company("");L.destino("");L.prostartdt("");L.proenddt("");L.sotypecode("");L.mtrlstatus("");L.jobstatus("");L.technam1("");L.technam2("");L.qutno("");L.cstctid("");L.jobdescrip("");L.items([])}};function J(){var L;L=x.document.getElementById((w.screenViewElement).slice(1));C=new y({});H=new K(C);z.applyBindings(H,L);A(w.salesOrderForm_btnClose).on("click",B.salesOrderForm_btnClose_onClick)}function G(N){var O,M,R,P,L;O=10;P=A(v.dashboardContainer);L=A(w.screenViewElement);M=parseInt(P.css("height"),O);R=parseInt(L.css("height"),O);if(M>R){L.css("height",M)}F.reset();A.post(r.getWorkOrderUrl,{ordnum:N}).done(B.getWorkOrder_OnDone).fail(function Q(S){throw"POST Fail with :"+S});L.show()}function D(){A(v.screenWorkOrderDetails).hide()}return{init:J,showFor:G,hide:D,}}(d,f,c,g,e))};i={dropdown_OnClick:function(x){var w,y;w=f(this);y=w.html();w.parents(v.dropdown).find(".value").text(y)},itemsPerPageSelector_OnClick:function(w){l.itemsPerPage=f(this).html();l.currentPage=1;n.paginate()},tableMainFieldWorkOrderLink_OnClick:function(w){m.screenWorkOrderDetails.showFor(f(this).data("workorder"))},sortButtons_OnClick:function(w){var x,y;x=f(this);y=x.data("field");if(l.sortLastButton!==null){l.sortLastButton.removeClass("asc desc")}if(l.sortField!==y){l.sortFieldOrder=""}l.sortField=y;if(l.sortFieldOrder==="ASC"){l.sortFieldOrder="DESC";x.addClass("asc").removeClass("desc")}else{l.sortFieldOrder="ASC";x.addClass("desc").removeClass("asc")}l.sortLastButton=x;n.paginate()},statusSelector_OnClick:function(y){var x,w;w=f(this).parents("tr").data("equipid");x=f(this).html();n.updateEquipStatus(w,x);n.updateStatus(w,x);n.setActionsState(w,x)},btnActionFilesDialog_OnClick:function(x){var y,w;y=f(this).data("equipid");w=y+"_EQM";l.currentID=w;o.functions.loadFileTree(w);f(o.htmlBindings.modal_ProjectFiles).modal("show")},btnActionAdd_OnClick:function(w){m.modalEquipmentHistoryFormAdd.showFor(f(this).data("equipid"))},btnActionEdit_OnClick:function(w){m.modalEquipmentHistoryFormEdit.showFor(f(this).data("qbtxlineid"))},btnActionView_OnClick:function(w){throw"Exception: Not implemented yet"},pagerButton_OnClick:function(w){var x=f(this).data("page");l.currentPage=x;n.paginate()},paginate_OnBeforeSend:function(w){f(".loading").show()},paginate_OnSuccess:function(z){console.log(z);var A,w,y,x;A=f.parseJSON(z);w=new BootstrapPager(A,i.pagerButton_OnClick);x=w.getPagerControl();f(v.pagerContainer).empty().append(x);f(v.itemCounter).html(w.itemsCount);y=w.getCurrentPagedItems();n.updateTable(y);f(".loading").hide()},};n={bindEventHandlers:function(){f(v.dropdown).on("click","a",i.dropdown_OnClick);f(v.itemsPerPageSelector).on("click","a",i.itemsPerPageSelector_OnClick);f(v.sortButtons).on("click",i.sortButtons_OnClick);f(v.pagerButton).on("click",i.pagerButton_OnClick);n.bindTableItemsEventHandlers()},bindTableItemsEventHandlers:function(){f(v.tableMainFieldWorkOrderLink).on("click",i.tableMainFieldWorkOrderLink_OnClick);f(v.statusSelector).on("click","a",i.statusSelector_OnClick);f(v.btnActionFilesDialog).on("click",i.btnActionFilesDialog_OnClick);f(v.btnActionAdd).on("click",i.btnActionAdd_OnClick);f(v.btnActionEdit).on("click",i.btnActionEdit_OnClick);f(v.btnActionView).on("click",i.btnActionView_OnClick)},buildClassBy:function(w){return w.toLowerCase().replace(" ","-")},usePlugins:function(){f(v.dateRangePickerSingle).daterangepicker({singleDatePicker:true,format:"YYYY-MM-DD",startDate:d.moment(),endDate:d.moment()})},paginate:function(){f.ajax({data:{predicate:"",page:l.currentPage,itemsPerPage:l.itemsPerPage,orderBy:l.sortField,order:l.sortFieldOrder},url:r.getEquipmentPage,type:"post",beforeSend:i.paginate_OnBeforeSend,success:i.paginate_OnSuccess})},getRowByEquipID:function(w){return f(v.tableMainFieldEquipId).filter(function x(y){return f(this).find("a").text()===w}).parent()},updateEquip:function(A,y,x,B){var z,w;d.console.log("equipID",A);d.console.log("workOrder",y);d.console.log("status",x);d.console.log("historyID",B);z=n.buildClassBy(x);w=n.getRowByEquipID(A);w.find(v.tableMainFieldWorkOrder).html('<a href="#" class="'+(v.tableMainFieldWorkOrderLink).slice(1)+'" data-workorder="'+y+'">'+y+"</a>");w.find(v.tableMainFieldStatus).find(".value").text(x);w.find(v.tableMainFieldStatus).find(".value").removeClass().addClass("value "+z).text(x);w.find(v.btnActionEdit).data("qbtxlineid",B);n.setActionsState(A,x)},updateEquipStatus:function(z,x){var y,w;y=n.buildClassBy(x);w=n.getRowByEquipID(z);w.find(v.tableMainFieldStatus).find(".value").removeClass().addClass("value "+y).text(x);n.setActionsState(z,x)},setActionsState:function(x,w){if(w==="Available"){n.enableRowActionAdd(x);n.disableRowActionEdit(x)}else{n.enableRowActionEdit(x);n.disableRowActionAdd(x)}},enableRowActionAdd:function(x){var w=n.getRowByEquipID(x);w.find(v.btnActionAdd).attr({disabled:false})},disableRowActionAdd:function(x){var w=n.getRowByEquipID(x);w.find(v.btnActionAdd).attr({disabled:true})},enableRowActionEdit:function(x){var w=n.getRowByEquipID(x);w.find(v.btnActionEdit).attr({disabled:false})},disableRowActionEdit:function(x){var w=n.getRowByEquipID(x);w.find(v.btnActionEdit).attr({disabled:true})},updateStatus:function(x,w){f.post(r.updateStatusUrl,{equipid:x,status:w}).done(function z(A){var B=f.parseJSON(A);if(B.success){}}).fail(function y(A){throw"POST Fail with :"+A})},buildTableItem:function(T,z,I){var M,A,W,x,D,G,B,E,K,U,R,P,C,F,J,O,Q,H,y,S,w,N,V,L;W=d.document;D=W.createElement("tr");y=function(X){X+=" field-work-order";return b.Helpers.withLinkTdBuilder(T.ordnum,X,"field-work-order-link","#",{workorder:T.ordnum})};R=function(X){X+=" field-id";return b.Helpers.withLinkTdBuilder(T.equipid,X,"",b.Helpers.Href("EquipmentHistoryDashboard","EquipmentHistories",{equipid:btoa(T.equipid),jsonFilterTree:"",itemPerPage:l.itemsPerPage,page:l.currentPage,orderBy:l.sortField,order:l.sortFieldOrder}),{})};F=function(X){X+=" field-part-no";return b.Helpers.simpleTdBuilder(T.itemno,X)};K=function(X){X+=" field-description";return b.Helpers.simpleTdBuilder(T.descrip,X)};O=function(X){X+=" field-brand";return b.Helpers.simpleTdBuilder(T.make,"")};Q=function(X){X+=" field-model";return b.Helpers.simpleTdBuilder(T.model,X)};w=function(X){X+=" field-serial-no";return b.Helpers.simpleTdBuilder(T.serialno,X)};V=function(X){X+=" field-voltage";return b.Helpers.simpleTdBuilder(T.Voltage,X)};U=function(X){X+=" field-type";return b.Helpers.simpleTdBuilder(T.EquipType,X)};C=function(X){X+=" field-date-out";return b.Helpers.simpleTdBuilder(T.installdte,X)};P=function(X){X+=" field-expected-in";return b.Helpers.simpleTdBuilder(T.expdtein,X)};E=function(X){X+=" field-received";return b.Helpers.simpleTdBuilder(T.daterec,X)};H=function(X){X+=" field-notes";return b.Helpers.simpleTdBuilder(T.notes,X)};B=function(X){X+=" field-asset-tag";return b.Helpers.simpleTdBuilder(T.assettag,X)};J=function(X){X+=" field-locno";return b.Helpers.simpleTdBuilder(T.locno,X)};N=function(){var ae,Y,ad,ac,ab,Z,aa,X;ad=f('<td class="item-field field-status">');ac=f('<div class="btn-group dropdown">');ab=f('<button class="btn btn-default btn-sm dropdown-toggle" type="button" data-toggle="dropdown">');Z=f('<span class="value '+n.buildClassBy(T.status)+'">'+T.status+" </span>");aa=f('<span class="caret"></span>');ab.append(Z);ab.append(aa);X=f('<ul class="dropdown-menu">');ae=["Available","Not Returned","Broken","Lost","Received"];for(Y in ae){if(ae.hasOwnProperty(Y)){X.append(f('<li role="presentation"> <a role="menuitem" tabindex="-1" href="#" data-value="'+ae[Y]+'">'+ae[Y]+"</a></li>"))}}ac.append(ab);ac.append(X);ad.append(ac);return ad[0]};G=function(){var Y,X;X=[];X.push(L());X.push(M());X.push(x());X.push(A());Y=window.document.createElement("div");Y.className="btn-group";return b.Helpers.complexTdBuilder(X,"item-actions",Y)};A=function(){var X,Y;Y=W.createElement("span");Y.className="glyphicon glyphicon-folder-close";X=v.btnActionFilesDialog.slice(1)+" btn-action btn btn-default btn-sm";return b.Helpers.linkBuilder(Y,X,"#",{equipid:T.equipid})};x=function(){var Y,aa,X,Z;Z=W.createElement("span");Z.className="glyphicon glyphicon-edit";Y=v.btnActionEdit.slice(1)+" btn-action btn btn-default btn-sm";aa={equipid:T.equipid,qbtxlineid:T.qbtxlineid,ordnum:T.ordnum};if(!T.qbtxlineid&&T.status==="Available"){X={disabled:"disabled"}}return b.Helpers.linkBuilder(Z,Y,"#",aa,X)};M=function(){var Y,aa,Z,X;Z=W.createElement("span");Z.className="glyphicon glyphicon-plus-sign";Y=v.btnActionAdd.slice(1)+" btn-action btn btn-default btn-sm";aa={equipid:T.equipid,qbtxlineid:T.qbtxlineid,ordnum:T.ordnum};if(T.status!=="Available"){X={disabled:"disabled"}}return b.Helpers.linkBuilder(Z,Y,"#",aa,X)};L=function(){var X,Y;Y=W.createElement("span");Y.className="glyphicon glyphicon-eye-open";X=v.btnActionView.slice(1)+" btn-action btn btn-default btn-sm";return b.Helpers.linkBuilder(Y,X,"#",{equipid:T.equipid})};D.className=z;D.dataset.equipid=T.equipid;D.appendChild(R(I));D.appendChild(y(I));D.appendChild(F(I));D.appendChild(K(I));D.appendChild(O(I));D.appendChild(Q(I));D.appendChild(w(I));D.appendChild(V(I));D.appendChild(U(I));D.appendChild(C(I));D.appendChild(P(I));D.appendChild(E(I));D.appendChild(H(I));D.appendChild(B(I));D.appendChild(J(I));D.appendChild(N(I));D.appendChild(G());return D},updateTable:function(w){var y,z,x;y=f(v.tableMain);z=y.children("tbody");z.empty();for(x in w){if(w.hasOwnProperty(x)){z.append(n.buildTableItem(w[x],"","item-field"))}}n.bindTableItemsEventHandlers()}};function k(w){v.itemsPerPageSelector=w}function h(w){l.itemsPerPage=w}function s(w){v.statusSelector=w}function t(w,x){q[w]=x}function j(x,w){r[x]=w}function p(){return l.currentID}function u(x){var w;d.console.log("filter: ",x);d.console.log("HTML Bindings");for(w in v){if(v.hasOwnProperty(w)){d.console.log("\t",w,":",v[w])}}d.console.log("Binding Event Handlers");n.bindEventHandlers();d.console.log("Use Plugins");n.usePlugins();d.console.log("Dictionaries:");d.console.log(q);d.console.log("Initializing MVVM related logic:");for(w in m){if(m.hasOwnProperty(w)){d.console.log("\t",w,":",m[w]);m[w].init()}}m.modalEquipmentHistoryFormAdd.setSaveHistoryCallback(n.updateEquip);m.modalEquipmentHistoryFormEdit.setUpdateHistoryCallback(n.updateEquip);m.modalEquipmentHistoryFormEdit.setDeleteHistoryCallback(n.updateEquip);o.init()}return{init:u,setItemsPerPage:h,setItemsPerPageSelector:k,setStatusSelector:s,addDictionary:t,addUrl:j,getCurrentID:p}}())}(window,window.jQuery,window.kb,window.ko,window.Backbone));