(function(){var e,c,b,a,d;d=window;e=d.jQuery;c=d.App;a=d.dandelion;b=a.namespace("App.FinancialDashboard",d);b.status={};b.dictionaries={};b.htmlBindings={};b.functions={};b.functions.formatToCurrency=function(g,i){var f,h,k,j;if(i==null){i=","}j=g.toString();f=parseInt((j.length/3)-1,10);k=0;h=!!~j.indexOf(".");if(h){k=j.slice(j.indexOf(".")).length}j=j.split("").reverse().join("");while(f!==0){j=j.slice(0,(f*3)+k)+i+j.slice((f*3)+k);f-=1}j=j.split("").reverse().join("");if(j.charAt(0)===i){j=j.slice(1)}return j};b.eventHandlers={};b.init=function(g){var f;g[0].urlARDashboard=b.urls.ARDashboard;f=AmCharts.makeChart("financial-chart",{type:"serial",titles:[{text:"Financial Summary",size:12,color:"#444"}],dataProvider:g,creditsPosition:"bottom-right",categoryField:"net",plotAreaBorderAlpha:0,balloonText:"[[title]]<br><span style='font-size:14px'><b>[[value]]</b> ([[percents]]%)</span>",categoryAxis:{gridAlpha:0.1,axisAlpha:0,axisColor:"#444",gridPosition:"start",titleBold:true,labelsEnabled:false,title:"NET: $ "+b.functions.formatToCurrency(g[0].net)},valueAxes:[{stackType:"regular",gridAlpha:0.1,axisAlpha:0,labelsEnabled:false}],graphs:[{title:"Account Payable",color:"#FFFFFF",labelText:"$ [[value]]",valueField:"ap",type:"column",lineAlpha:0,fillAlphas:1,lineColor:"#cc3333",balloonText:"<b><span style='color:#cc3333'>[[title]]</b></span><br><span style='font-size:14px'>$ [[value]]: <b> [[percents]]%</b></span>",labelPosition:"middle"},{title:"Work in Process",color:"#FFFFFF",labelText:"$ [[value]]",valueField:"wip",type:"column",lineAlpha:0,fillAlphas:1,lineColor:"#cccc33",balloonText:"<b><span style='color:#cccc33'>[[title]]</b></span><br><span style='font-size:14px'>$ [[value]]: <b> [[percents]]%</b></span>",labelPosition:"middle"},{title:"Inventory",color:"#FFFFFF",labelText:"$ [[value]]",valueField:"inventory",type:"column",lineAlpha:0,fillAlphas:1,lineColor:"#3399cc",balloonText:"<b><span style='color:#3399cc'>[[title]]</b></span><br><span style='font-size:14px'>$ [[value]]: <b> [[percents]]%</b></span>",labelPosition:"middle"},{title:"Cash",color:"#FFFFFF",labelText:"$ [[value]]",valueField:"cash",type:"column",lineAlpha:0,fillAlphas:1,lineColor:"#006633",balloonText:"<b><span style='color:#006633'>[[title]]</b></span><br><span style='font-size:14px'>$ [[value]]: <b> [[percents]]%</b></span>",labelPosition:"middle"},{title:"Account Receivable",color:"#FFFFFF",labelText:"$ [[value]]",valueField:"ar",type:"column",lineAlpha:0,fillAlphas:1,lineColor:"#99cc66",balloonText:"<b><span style='color:#99cc66'>[[title]]</b></span><br><span style='font-size:14px'>$ [[value]]: <b> [[percents]]%</b></span>",labelPosition:"middle",urlField:"urlARDashboard"}],legend:{align:"center",valueText:"[[value]]",forceWidth:true,markerType:"square",horizontalGap:10,labelWidth:120,position:"right",reversedOrder:true},"export":{enabled:true},responsive:{enabled:true,rules:[{minWidth:500,legendPosition:"right",overrides:{legend:{enabled:true}}},{maxWidth:499,legendPosition:"right",overrides:{legend:{enabled:false}}}]}});return e.ajax({data:{},url:b.urls.getARData,type:"get",beforeSend:function(){return e(".loading").show()},success:function(h){var i,j;j=e.parseJSON(h);j.chartData.urlARDashboard=b.urls.ARDashboard;console.log(j.chartData);i=AmCharts.makeChart("ar-summary-chart",{type:"pie",titleField:"interval",valueField:"value",dataProvider:j.chartData,urlField:"urlARDashboard",labelText:"[[title]]",allLabels:[{y:"47%",text:"Account Receivable",align:"center",size:12,color:"#222",alpha:1,rotation:0,bold:true,url:b.urls.ARDashboard},{y:"52%",text:"$ "+b.functions.formatToCurrency(g[0].ar),align:"center",size:12,color:"#444",alpha:1,rotation:0,bold:true,url:b.urls.ARDashboard}],startEffect:"easeInSine",outlineColor:"#FFFFFF",outlineAlpha:0.8,outlineThickness:2,innerRadius:"75%",balloonText:"[[title]]<br><span style='font-size:14px'><b>[[value]]</b> ([[percents]]%)</span>",colors:["#B0DE09","#F8FF01","#FCD202","#FF9E01","#FF6600","#cc3333"],legend:{align:"center",forceWidth:true,valueText:"$ [[value]]",markerType:"square",horizontalGap:10,labelWidth:120,position:"right"},"export":{enabled:true},responsive:{enabled:true,rules:[{minWidth:500,legendPosition:"right",overrides:{legend:{enabled:true}}},{maxWidth:499,legendPosition:"right",overrides:{allLabels:[{y:"47%",text:"Account Receivable"},{y:"52%"}],legend:{enabled:false}}}]}});return e(".loading").hide()}})}}).call(this);