// Generated by CoffeeScript 1.9.3
(function() {
  var $, App, FinancialDashboard, dandelion, global;

  global = window;

  $ = global.jQuery;

  App = global.App;

  dandelion = global.dandelion;

  FinancialDashboard = dandelion.namespace('App.FinancialDashboard', global);

  FinancialDashboard.status = {};

  FinancialDashboard.dictionaries = {};

  FinancialDashboard.htmlBindings = {};

  FinancialDashboard.functions = {};

  FinancialDashboard.functions.formatToCurrency = function(value) {
    var offset, strValue;
    strValue = value.toString();
    offset = 3;
    if (strValue.includes('.')) {
      offset += strValue.slice(strValue.indexOf('.')).length;
    }
    if (strValue.length > 3) {
      return strValue.slice(0, -offset) + ',' + strValue.slice(-offset);
    } else {
      return strValue;
    }
  };

  FinancialDashboard.eventHandlers = {};

  FinancialDashboard.init = function(chartData) {
    console.log("financial dashboard initializer");
    return AmCharts.ready(function() {
      var categoryAxis, chart, graph, legend, valueAxis;
      chart = new AmCharts.AmSerialChart();
      chart.creditsPosition = 'bottom-right';
      chart.dataProvider = chartData;
      chart.categoryField = "NET";
      chart.plotAreaBorderAlpha = 0;
      chart.balloonText = "[[title]]<br><span style='font-size:14px'><b>[[value]]</b> ([[percents]]%)</span>";
      categoryAxis = chart.categoryAxis;
      categoryAxis.gridAlpha = 0.1;
      categoryAxis.axisAlpha = 0;
      categoryAxis.axisColor = '#444';
      categoryAxis.gridPosition = "start";
      categoryAxis.titleBold = true;
      categoryAxis.title = 'NET Valuation: $ ' + FinancialDashboard.functions.formatToCurrency(chartData[0].NET);
      categoryAxis.labelsEnabled = false;
      valueAxis = new AmCharts.ValueAxis();
      valueAxis.stackType = "regular";
      valueAxis.gridAlpha = 0.1;
      valueAxis.axisAlpha = 0;
      valueAxis.labelsEnabled = false;
      chart.addValueAxis(valueAxis);
      graph = new AmCharts.AmGraph();
      graph.title = "WIP";
      graph.color = '#FFFFFF';
      graph.labelText = "$ [[value]]";
      graph.valueField = "WIP";
      graph.type = "column";
      graph.lineAlpha = 0;
      graph.fillAlphas = 1;
      graph.lineColor = "#cccc33";
      graph.balloonText = "<b><span style='color:#cccc33'>[[title]]</b></span><br><span style='font-size:14px'>$ [[value]]: <b> [[percents]]%</b></span>";
      graph.labelPosition = "middle";
      chart.addGraph(graph);
      graph = new AmCharts.AmGraph();
      graph.title = "Income";
      graph.color = '#FFFFFF';
      graph.labelText = "$ [[value]]";
      graph.valueField = "Income";
      graph.type = "column";
      graph.lineAlpha = 0;
      graph.fillAlphas = 1;
      graph.lineColor = "#3399cc";
      graph.balloonText = "<b><span style='color:#3399cc'>[[title]]</b></span><br><span style='font-size:14px'>$ [[value]]: <b> [[percents]]%</b></span>";
      graph.labelPosition = "middle";
      chart.addGraph(graph);
      graph = new AmCharts.AmGraph();
      graph.title = "Cash";
      graph.color = '#FFFFFF';
      graph.labelText = "$ [[value]]";
      graph.valueField = "Cash";
      graph.type = "column";
      graph.lineAlpha = 0;
      graph.fillAlphas = 1;
      graph.lineColor = "#006633";
      graph.balloonText = "<b><span style='color:#006633'>[[title]]</b></span><br><span style='font-size:14px'>$ [[value]]: <b> [[percents]]%</b></span>";
      graph.labelPosition = "middle";
      chart.addGraph(graph);
      graph = new AmCharts.AmGraph();
      graph.title = "Account Receivable";
      graph.color = '#FFFFFF';
      graph.labelText = "$ [[value]]";
      graph.valueField = "Account Receivable";
      graph.type = "column";
      graph.lineAlpha = 0;
      graph.fillAlphas = 1;
      graph.lineColor = "#99cc66";
      graph.balloonText = "<b><span style='color:#99cc66'>[[title]]</b></span><br><span style='font-size:14px'>$ [[value]]: <b> [[percents]]%</b></span>";
      graph.labelPosition = "middle";
      chart.addGraph(graph);
      graph = new AmCharts.AmGraph();
      graph.title = "Account Payable";
      graph.color = '#FFFFFF';
      graph.labelText = "$ [[value]]";
      graph.valueField = "Account Payable";
      graph.type = "column";
      graph.lineAlpha = 0;
      graph.fillAlphas = 1;
      graph.lineColor = "#cc3333";
      graph.balloonText = "<b><span style='color:#cc3333'>[[title]]</b></span><br><span style='font-size:14px'>$ [[value]]: <b> [[percents]]%</b></span>";
      graph.labelPosition = "middle";
      chart.addGraph(graph);
      legend = new AmCharts.AmLegend();
      legend.align = "center";
      legend.markerType = "square";
      legend.horizontalGap = 10;
      legend.labelWidth = 150;
      legend.position = 'right';
      legend.reversedOrder = true;
      chart.addLegend(legend);
      return chart.write("financial-chart");
    });
  };

}).call(this);

//# sourceMappingURL=financialdashboard.js.map
